<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚»ã‚¯ã‚¿ãƒ¼è³‡é‡‘ç§»å‹•ãƒãƒƒãƒ—</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background: radial-gradient(ellipse at center, #0d0d1a 0%, #000000 100%);
            color: #ffffff;
            overflow: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(138, 43, 226, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(0, 100, 255, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 0, 150, 0.05) 0%, transparent 50%);
            animation: nebula 30s ease-in-out infinite alternate;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes nebula {
            0% { transform: translate(0, 0) scale(1); }
            100% { transform: translate(5%, 5%) scale(1.1); }
        }

        .container {
            display: grid;
            grid-template-columns: minmax(800px, 1fr) 280px;
            grid-template-rows: auto 1fr auto;
            height: 100vh;
            max-width: 100vw;
            position: relative;
            z-index: 10;
        }

        .main-section {
            position: relative;
            display: flex;
            flex-direction: column;
            background: #0a0a0a;
            grid-column: 1;
            grid-row: 1 / 3;
        }

        header {
            padding: 1.5rem 2.5rem 1rem;
            z-index: 10;
        }

        h1 {
            font-size: 2.2rem;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .date-range {
            font-size: 0.9rem;
            color: #666;
            font-weight: 300;
        }

        .galaxy-container {
            flex: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding-bottom: 60px;
        }

        .galaxy-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 750px;
            height: 750px;
        }

        /* ã‚»ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ - å…‰ã®è¼ª */
        @keyframes rotate {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* å€‹åˆ¥ã®å›è»¢é€Ÿåº¦ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes rotate-fast { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }
        @keyframes rotate-medium { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }
        @keyframes rotate-slow { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }
        @keyframes rotate-very-slow { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }

        @keyframes glow-pulse {
            0%, 100% {
                filter: drop-shadow(0 0 8px rgba(0, 255, 136, 0.6));
            }
            50% {
                filter: drop-shadow(0 0 15px rgba(0, 255, 136, 0.9));
            }
        }

        .rotation-arrows {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 720px;
            height: 720px;
            pointer-events: none;
        }

        .cycle-label {
            position: absolute;
            font-size: 0.95rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8), 0 2px 4px rgba(0, 0, 0, 0.9);
            padding: 0.4rem 0.8rem;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .cycle-label.top { top: 80px; right: 80px; }
        .cycle-label.right { bottom: 80px; right: 80px; }
        .cycle-label.bottom { bottom: 80px; left: 80px; }
        .cycle-label.left { top: 80px; left: 80px; }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140px;
            height: 140px;
            border-radius: 50%;
            border: 3px solid #00ff88;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 700;
            background: rgba(0, 255, 136, 0.05);
            z-index: 100;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .center-circle:hover {
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }

        .center-circle.negative-market {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.05);
        }

        .center-label {
            font-size: 0.9rem;
            margin-bottom: 0.2rem;
        }

        .center-price {
            font-size: 1.1rem;
            font-weight: 700;
            color: #888;
            margin-bottom: 0.2rem;
        }

        .center-value {
            font-size: 1.3rem;
            font-weight: 900;
            color: #00ff88;
        }

        .center-value.negative {
            color: #ff4444;
        }

        .orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid rgba(0, 255, 136, 0.08);
            border-radius: 50%;
            box-shadow: 
                0 0 10px rgba(0, 255, 136, 0.1),
                inset 0 0 10px rgba(0, 255, 136, 0.05);
            animation: orbit-pulse 4s ease-in-out infinite;
        }

        @keyframes orbit-pulse {
            0%, 100% { 
                border-color: rgba(0, 255, 136, 0.08);
                box-shadow: 0 0 10px rgba(0, 255, 136, 0.1), inset 0 0 10px rgba(0, 255, 136, 0.05);
            }
            50% { 
                border-color: rgba(0, 255, 136, 0.15);
                box-shadow: 0 0 20px rgba(0, 255, 136, 0.2), inset 0 0 15px rgba(0, 255, 136, 0.1);
            }
        }

        .orbit-1 { width: 250px; height: 250px; animation-delay: 0s; }
        .orbit-2 { width: 450px; height: 450px; animation-delay: 1s; }
        .orbit-3 { width: 650px; height: 650px; animation-delay: 2s; }
        .orbit-4 { width: 750px; height: 750px; animation-delay: 3s; }

        .sector {
            position: absolute;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid;
            will-change: transform;
        }

        .sector.positive {
            background: radial-gradient(circle at 30% 30%, rgba(0, 255, 136, 0.95), rgba(0, 255, 136, 0.7), rgba(0, 255, 136, 0.4), rgba(0, 255, 136, 0.2));
            border-color: rgba(0, 255, 136, 0.8);
            box-shadow: 
                0 2px 8px rgba(0, 255, 136, 0.3),
                0 6px 20px rgba(0, 255, 136, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 3px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(0, 0, 0, 0.2),
                inset 2px 2px 6px rgba(255, 255, 255, 0.15);
        }

        .sector.negative {
            background: radial-gradient(circle at 30% 30%, rgba(255, 68, 68, 0.95), rgba(255, 68, 68, 0.7), rgba(255, 68, 68, 0.4), rgba(255, 68, 68, 0.2));
            border-color: rgba(255, 68, 68, 0.8);
            box-shadow: 
                0 2px 8px rgba(255, 68, 68, 0.3),
                0 6px 20px rgba(255, 68, 68, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 3px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(0, 0, 0, 0.2),
                inset 2px 2px 6px rgba(255, 255, 255, 0.15);
        }

        .sector:hover {
            transform: scale(1.15) translateY(-2px);
            z-index: 50;
        }

        .sector.positive:hover {
            box-shadow: 
                0 4px 12px rgba(0, 255, 136, 0.5),
                0 8px 30px rgba(0, 255, 136, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.5),
                inset 0 -1px 3px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(0, 0, 0, 0.2),
                inset 2px 2px 6px rgba(255, 255, 255, 0.2);
        }

        .sector.negative:hover {
            box-shadow: 
                0 4px 12px rgba(255, 68, 68, 0.5),
                0 8px 30px rgba(255, 68, 68, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.5),
                inset 0 -1px 3px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(0, 0, 0, 0.2),
                inset 2px 2px 6px rgba(255, 255, 255, 0.2);
        }

        .sector.highlighted {
            transform: scale(1.15);
            z-index: 60;
            filter: brightness(1.2);
        }

        .sector-label {
            text-align: center;
            line-height: 1.2;
            filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.9)) drop-shadow(0 1px 2px rgba(0, 0, 0, 1));
            text-shadow: 
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 5px rgba(0, 0, 0, 0.8);
        }

        .sector-icon {
            font-size: 1.3rem;
            margin-bottom: 0.25rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .sector-name {
            display: block;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.02em;
            line-height: 1.3;
        }

        .sector-value {
            display: block;
            font-size: 1rem;
            font-weight: 800;
            letter-spacing: 0.01em;
            margin-top: 0.1rem;
        }

        .rotating-ring {
            position: absolute;
            border: 5px solid;
            border-radius: 50%;
            border-color: transparent transparent rgba(255, 255, 255, 0.95) rgba(255, 255, 255, 0.95);
            pointer-events: none;
            animation: rotateRing 0.6s linear infinite;
            box-shadow: 
                0 0 30px rgba(255, 255, 255, 0.8),
                inset 0 0 20px rgba(255, 255, 255, 0.5);
            filter: brightness(1.5) drop-shadow(0 0 10px rgba(255, 255, 255, 0.9));
        }

        @keyframes rotateRing {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .sector-tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 1rem 1.2rem;
            font-size: 0.75rem;
            color: #fff;
            pointer-events: auto;
            z-index: 200;
            max-width: 350px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.4);
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(15px);
        }

        .sector-tooltip.negative-sector {
            border-color: #ff4444;
            box-shadow: 0 8px 32px rgba(255, 68, 68, 0.4);
        }

        .sector-tooltip.negative-sector .tooltip-title {
            color: #ff4444;
            border-bottom-color: rgba(255, 68, 68, 0.3);
        }

        .sector-tooltip.negative-sector .tooltip-stock {
            border-left-color: rgba(255, 68, 68, 0.3);
        }

        .sector-tooltip.negative-sector .tooltip-stock:hover {
            background: rgba(255, 68, 68, 0.1);
            border-left-color: #ff4444;
        }

        .sector-tooltip.visible {
            opacity: 1;
        }

        .sector-tooltip::-webkit-scrollbar {
            width: 6px;
        }

        .sector-tooltip::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .sector-tooltip::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 3px;
        }

        .tooltip-title {
            font-weight: 700;
            color: #00ff88;
            margin-bottom: 0.7rem;
            font-size: 0.95rem;
            border-bottom: 1px solid rgba(0, 255, 136, 0.3);
            padding-bottom: 0.5rem;
        }

        .tooltip-subtitle {
            font-size: 0.7rem;
            color: #888;
            margin-bottom: 0.5rem;
        }

        .tooltip-stock {
            color: #ddd;
            margin: 0.3rem 0;
            padding: 0.4rem 0.6rem;
            border-left: 2px solid rgba(0, 255, 136, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .tooltip-stock:hover {
            background: rgba(0, 255, 136, 0.1);
            border-left-color: #00ff88;
        }

        .stock-name-code {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .stock-name {
            font-weight: 600;
        }

        .stock-code-cap {
            font-size: 0.65rem;
            color: #888;
            margin-top: 0.1rem;
        }

        .stock-change {
            font-weight: 700;
            font-size: 0.7rem;
            margin-left: 0.8rem;
        }

        .stock-change.positive {
            color: #00ff88;
        }

        .stock-change.negative {
            color: #ff4444;
        }

        .particle {
            position: absolute;
            width: 16px;
            height: 16px;
            pointer-events: none;
            font-size: 16px;
            line-height: 16px;
            opacity: 0.5;
            will-change: transform, opacity;
        }

        .sidebar {
            background: #0f0f0f;
            border-left: 1px solid #222;
            padding: 2rem 0.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            grid-column: 2;
            grid-row: 1 / 3;
        }

        .sidebar h2 {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
        }

        .news-container {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .news-container::-webkit-scrollbar {
            width: 6px;
        }

        .news-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .news-container::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 3px;
        }

        .news-item {
            margin-bottom: 1rem;
            padding: 0.9rem;
            background: rgba(255, 255, 255, 0.02);
            border-left: 3px solid #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        .news-item:hover {
            background: rgba(0, 255, 136, 0.15);
            transform: translateX(-5px);
        }
        
        .news-item.negative:hover {
            background: rgba(255, 68, 68, 0.15);
        }

        .news-item.negative {
            border-left-color: #ff4444;
        }

        .news-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .news-icon {
            display: inline-block;
            margin-right: 0.5rem;
        }

        .news-sector {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 0.3rem;
        }

        .news-content {
            font-size: 0.8rem;
            line-height: 1.5;
            color: #aaa;
            margin-bottom: 0.5rem;
        }

        .news-time {
            font-size: 0.7rem;
            color: #666;
        }

        .news-source {
            font-size: 0.7rem;
            color: #555;
            font-style: italic;
            margin-top: 0.4rem;
        }

        .market-indicators {
            position: fixed;
            left: 2rem;
            top: 7.5rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 8px;
            padding: 0.5rem 0.6rem;
            backdrop-filter: blur(20px);
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            min-width: auto;
        }

        .indicator {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin: 0.15rem 0;
        }

        .indicator-name {
            font-size: 0.65rem;
            color: #888;
            min-width: auto;
        }

        .indicator-value {
            font-size: 0.8rem;
            font-weight: 700;
            color: #00ff88;
        }

        .indicator-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.6rem 0;
            min-width: 200px;
        }

        .indicator-label {
            font-size: 0.8rem;
            color: #888;
            margin-right: 1rem;
        }

        .indicator-value {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .indicator-price {
            font-size: 0.95rem;
            font-weight: 700;
            color: #fff;
        }

        .indicator-change {
            font-size: 0.7rem;
            font-weight: 700;
            margin-top: 0.2rem;
        }

        .indicator-change.positive {
            color: #00ff88;
        }

        .indicator-change.negative {
            color: #ff4444;
        }

        .company-detail-panel {
            position: fixed;
            width: 280px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #00ff88;
            border-radius: 8px;
            padding: 1rem 1.2rem;
            z-index: 300;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 255, 136, 0.4);
        }

        .company-detail-panel.visible {
            opacity: 1;
            pointer-events: auto;
        }

        .detail-close {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        .detail-close:hover {
            color: #fff;
        }

        .detail-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #00ff88;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(0, 255, 136, 0.3);
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin: 0.7rem 0;
            font-size: 0.85rem;
        }

        .detail-label {
            color: #888;
        }

        .detail-value {
            color: #fff;
            font-weight: 700;
        }

        .timeline-control {
            background: linear-gradient(135deg, #0a0a0f 0%, #0f0f0f 100%);
            border-top: 1px solid #222;
            padding: 1.5rem 2rem;
            grid-column: 1 / 3;
            grid-row: 3;
        }

        .timeline-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .timeline-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            min-width: 500px;
        }

        .timeline-title {
            font-size: 0.7rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-weight: 600;
        }

        .timeline-date-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.6rem;
            min-height: 90px;
            justify-content: center;
        }

        .timeline-current {
            font-size: 2.2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.02em;
            text-align: center;
            min-width: 300px;
            display: flex;
            justify-content: center;
        }

        .timeline-range {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            font-size: 0.85rem;
            color: #666;
            min-height: 32px;
        }

        .timeline-range-arrow {
            color: #00ff88;
            font-size: 1rem;
        }

        .timeline-date {
            padding: 0.35rem 0.9rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 80px;
            text-align: center;
        }

        .timeline-date:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: rgba(0, 255, 136, 0.3);
            color: #00ff88;
        }

        .period-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 0.6rem;
            width: 100%;
            max-width: 600px;
        }

        .period-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            padding: 0.7rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
            font-weight: 700;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .period-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .period-btn:hover::before {
            left: 100%;
        }

        .period-btn:hover {
            background: rgba(0, 255, 136, 0.05);
            border-color: rgba(0, 255, 136, 0.3);
            color: #00ff88;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 255, 136, 0.2);
        }

        .period-btn.active {
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            color: #000;
            border-color: transparent;
            font-weight: 800;
            box-shadow: 
                0 0 20px rgba(0, 255, 136, 0.4),
                0 4px 15px rgba(0, 255, 136, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }

        .period-btn.active::before {
            display: none;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 1200px) {
            .timeline-info {
                min-width: 400px;
            }
            
            .timeline-current {
                font-size: 1.8rem;
                min-width: 250px;
            }
            
            .period-selector {
                max-width: 500px;
            }
        }

        @media (max-width: 768px) {
            .timeline-info {
                min-width: 300px;
            }
            
            .timeline-current {
                font-size: 1.5rem;
                min-width: 200px;
            }
            
            .period-selector {
                grid-template-columns: repeat(3, 1fr);
                grid-template-rows: auto;
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-section">
            <header>
                <h1>ã‚»ã‚¯ã‚¿ãƒ¼è³‡é‡‘ç§»å‹•ãƒãƒƒãƒ—</h1>
                <div class="date-range" id="date-range-display">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿</div>
            </header>

            <div class="galaxy-container">
                <div class="galaxy-circle" id="galaxy">
                    <!-- å›ºå®šéƒ¨åˆ†ï¼šåå­—ç·šã¨è»¸ãƒ©ãƒ™ãƒ« -->
                    <svg class="rotation-static" viewBox="0 0 720 720" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 720px; height: 720px; pointer-events: none;">
                        <!-- åå­—ç·š -->
                        <line x1="360" y1="60" x2="360" y2="660" stroke="rgba(255, 255, 255, 0.2)" stroke-width="1" stroke-dasharray="5,5" />
                        <line x1="60" y1="360" x2="660" y2="360" stroke="rgba(255, 255, 255, 0.2)" stroke-width="1" stroke-dasharray="5,5" />
                        
                        <!-- è»¸ãƒ©ãƒ™ãƒ« -->
                        <text x="360" y="40" text-anchor="middle" fill="rgba(255, 255, 255, 0.6)" font-size="12" font-family="Noto Sans JP">æ™¯æ°—ï¼šå¼·</text>
                        <text x="360" y="690" text-anchor="middle" fill="rgba(255, 255, 255, 0.6)" font-size="12" font-family="Noto Sans JP">æ™¯æ°—ï¼šå¼±</text>
                        <text x="40" y="365" text-anchor="middle" fill="rgba(255, 255, 255, 0.6)" font-size="12" font-family="Noto Sans JP">é‡‘åˆ©ï¼šä½</text>
                        <text x="680" y="365" text-anchor="middle" fill="rgba(255, 255, 255, 0.6)" font-size="12" font-family="Noto Sans JP">é‡‘åˆ©ï¼šé«˜</text>
                    </svg>
                    
                    <!-- å›ºå®šéƒ¨åˆ†ï¼šå††å½¢ã®è¼ª -->
                    <svg class="rotation-static" viewBox="0 0 720 720" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 720px; height: 720px; pointer-events: none;">
                        <!-- å††å½¢ã®è¼ªï¼ˆå›ºå®šãƒ»æ˜ã‚‹ãï¼‰ -->
                        <circle cx="360" cy="360" r="310" stroke="rgba(0, 255, 136, 0.3)" stroke-width="2" fill="none" />
                    </svg>
                    
                    <!-- å›è»¢éƒ¨åˆ†ï¼š4è‰²ã®å…‰ã‚‹ç‚¹ã§ã‚†ã£ãã‚Šç‚¹æ»… -->
                    <svg class="rotation-arrows" viewBox="0 0 720 720">
                        <defs>
                            <!-- ã‚°ãƒ­ãƒ¼åŠ¹æœ -->
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge>
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- å…‰ã‚‹ç‚¹ï¼ˆ12å€‹ã«å‰Šæ¸›ãƒ»4è‰²ãƒ»å€‹åˆ¥å›è»¢é€Ÿåº¦ï¼‰ -->
                        <!-- é»„è‰²ï¼ˆ3å€‹ï¼‰ -->
                        <circle cx="360" cy="50" r="4" fill="#FFD700" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="4.2s" repeatCount="indefinite" begin="0s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="45s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="360" cy="670" r="4" fill="#FFD700" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="5.1s" repeatCount="indefinite" begin="1.7s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="55s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="50" cy="360" r="4" fill="#FFD700" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="3.6s" repeatCount="indefinite" begin="2.4s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="90s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- ç™½ï¼ˆ3å€‹ï¼‰ -->
                        <circle cx="610" cy="110" r="4" fill="#FFFFFF" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="2.9s" repeatCount="indefinite" begin="0.4s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="50s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="110" cy="610" r="4" fill="#FFFFFF" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="3.2s" repeatCount="indefinite" begin="2.1s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="80s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="110" cy="110" r="4" fill="#FFFFFF" filter="url(#glow)">
                            <animate attributeName="opacity" values="1;0.2;1" dur="2.5s" repeatCount="indefinite" begin="2.8s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="40s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- ç·‘ï¼ˆ3å€‹ï¼‰ -->
                        <circle cx="652" cy="208" r="3" fill="#00ff88" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="2.1s" repeatCount="indefinite" begin="1.5s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="95s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="652" cy="512" r="3" fill="#00ff88" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="4.4s" repeatCount="indefinite" begin="2.3s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="70s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="68" cy="360" r="3" fill="#00ff88" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="3.1s" repeatCount="indefinite" begin="3.0s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="48s" repeatCount="indefinite"/>
                        </circle>
                        
                        <!-- èµ¤ï¼ˆ3å€‹ï¼‰ -->
                        <circle cx="205" cy="652" r="3" fill="#FF6B6B" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="3.5s" repeatCount="indefinite" begin="0.8s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="62s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="68" cy="208" r="3" fill="#FF6B6B" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="4.0s" repeatCount="indefinite" begin="2.5s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="52s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="515" cy="652" r="3" fill="#FF6B6B" filter="url(#glow)">
                            <animate attributeName="opacity" values="0.8;0.2;0.8" dur="3.3s" repeatCount="indefinite" begin="3.2s"/>
                            <animateTransform attributeName="transform" type="rotate" from="0 360 360" to="360 360 360" dur="68s" repeatCount="indefinite"/>
                        </circle>
                    </svg>
                    
                    <div class="cycle-label top">æ¥­ç¸¾ç›¸å ´</div>
                    <div class="cycle-label right">é€†é‡‘èç›¸å ´</div>
                    <div class="cycle-label bottom">é€†æ¥­ç¸¾ç›¸å ´</div>
                    <div class="cycle-label left">é‡‘èç›¸å ´</div>
                    
                    <div class="orbit orbit-1"></div>
                    <div class="orbit orbit-2"></div>
                    <div class="orbit orbit-3"></div>
                    <div class="orbit orbit-4"></div>
                    <div class="center-circle" id="center-circle">
                        <div class="center-label">æ—¥çµŒ33æ¥­ç¨®</div>
                        <div class="center-price" id="nikkei-price">Â¥39,081</div>
                        <div class="center-value" id="nikkei-change">+1.8%</div>
                    </div>
                </div>
                
                <!-- å¸‚å ´æŒ‡æ¨™ãƒ‘ãƒãƒ« -->
                <div class="market-indicators">
                    <div class="indicator-item">
                        <div class="indicator-label">æ—¥çµŒå¹³å‡</div>
                        <div class="indicator-value">
                            <div class="indicator-price" id="nikkei-indicator-price">Â¥39,081</div>
                            <div class="indicator-change positive" id="nikkei-indicator-change">+1.8%</div>
                        </div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-label">TOPIX</div>
                        <div class="indicator-value">
                            <div class="indicator-price" id="topix-price">2,723</div>
                            <div class="indicator-change positive" id="topix-change">+1.5%</div>
                        </div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-label">ã‚°ãƒ­ãƒ¼ã‚¹250</div>
                        <div class="indicator-value">
                            <div class="indicator-price" id="growth-price">685</div>
                            <div class="indicator-change positive" id="growth-change">+2.3%</div>
                        </div>
                    </div>
                    <div class="indicator-item">
                        <div class="indicator-label">ãƒ‰ãƒ«å††</div>
                        <div class="indicator-value">
                            <div class="indicator-price" id="usdjpy-price">Â¥157.82</div>
                            <div class="indicator-change negative" id="usdjpy-change">-0.3%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <h2>ğŸ“° ä¸»è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼†ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
            <button onclick="fetchNews()" style="width: 100%; padding: 8px; margin-bottom: 10px; background: linear-gradient(135deg, #00ff88, #00cc6a); color: #0a0a0a; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease;">
                ğŸ”„ ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—
            </button>
            <div class="news-container" id="news-container"></div>
        </div>

        <!-- ä¼æ¥­è©³ç´°ãƒ‘ãƒãƒ« -->
        <div class="company-detail-panel" id="company-detail">
            <button class="detail-close" onclick="closeCompanyDetail()">Ã—</button>
            <div class="detail-title" id="detail-company-name">ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š</div>
            <div class="detail-item">
                <span class="detail-label">æ™‚ä¾¡ç·é¡</span>
                <span class="detail-value" id="detail-market-cap">42.5å…†å††</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">æ ªä¾¡</span>
                <span class="detail-value" id="detail-stock-price">Â¥2,845</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">PER</span>
                <span class="detail-value" id="detail-per">12.5å€</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">PBR</span>
                <span class="detail-value" id="detail-pbr">1.2å€</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">ROE</span>
                <span class="detail-value" id="detail-roe">9.6%</span>
            </div>
        </div>

        <div class="timeline-control">
            <div class="timeline-wrapper">
                <div class="timeline-info">
                    <div class="timeline-title">Data Period</div>
                    <div class="timeline-date-display">
                        <div class="timeline-current" id="timeline-current">2024å¹´12æœˆ</div>
                        <div class="timeline-range">
                            <span class="timeline-date" id="timeline-start">2024/12/1</span>
                            <span class="timeline-range-arrow">â†’</span>
                            <span class="timeline-date" id="timeline-end">2024/12/31</span>
                        </div>
                    </div>
                </div>
                <div class="period-selector">
                    <button class="period-btn" data-period="1d">1æ—¥</button>
                    <button class="period-btn" data-period="1w">1é€±é–“</button>
                    <button class="period-btn active" data-period="1m">1ãƒ¶æœˆ</button>
                    <button class="period-btn" data-period="3m">3ãƒ¶æœˆ</button>
                    <button class="period-btn" data-period="6m">6ãƒ¶æœˆ</button>
                    <button class="period-btn" data-period="1y">1å¹´</button>
                    <button class="period-btn" data-period="3y">3å¹´</button>
                    <button class="period-btn" data-period="5y">5å¹´</button>
                    <button class="period-btn" data-period="10y">10å¹´</button>
                    <button class="period-btn" data-period="max">å…¨æœŸé–“</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚»ã‚¯ã‚¿ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
        const SECTOR_ICONS = {
            "æ°´ç”£ãƒ»è¾²æ—": "ğŸŸ",
            "é‰±æ¥­": "â›ï¸",
            "å»ºè¨­": "ğŸ—ï¸",
            "é£Ÿæ–™å“": "ğŸ±",
            "ç¹Šç¶­è£½å“": "ğŸ‘”",
            "ãƒ‘ãƒ«ãƒ—ãƒ»ç´™": "ğŸ“„",
            "åŒ–å­¦": "âš—ï¸",
            "åŒ»è–¬å“": "ğŸ’Š",
            "çŸ³æ²¹ãƒ»çŸ³ç‚­": "â›½",
            "ã‚´ãƒ è£½å“": "ğŸ›",
            "ã‚¬ãƒ©ã‚¹ãƒ»åœŸçŸ³": "ğŸªŸ",
            "é‰„é‹¼": "ğŸ­",
            "éé‰„é‡‘å±": "ğŸ”©",
            "é‡‘å±è£½å“": "ğŸ”§",
            "æ©Ÿæ¢°": "âš™ï¸",
            "é›»æ°—æ©Ÿå™¨": "ğŸ’¡",
            "è¼¸é€ç”¨æ©Ÿå™¨": "ğŸš—",
            "ç²¾å¯†æ©Ÿå™¨": "ğŸ”¬",
            "ãã®ä»–è£½å“": "ğŸ®",
            "é›»æ°—ãƒ»ã‚¬ã‚¹æ¥­": "âš¡",
            "é™¸é‹æ¥­": "ğŸšƒ",
            "æµ·é‹æ¥­": "ğŸš¢",
            "ç©ºé‹æ¥­": "âœˆï¸",
            "å€‰åº«ãƒ»é‹è¼¸": "ğŸ“¦",
            "æƒ…å ±ãƒ»é€šä¿¡": "ğŸ“±",
            "å¸å£²æ¥­": "ğŸ“Š",
            "å°å£²æ¥­": "ğŸ›’",
            "éŠ€è¡Œæ¥­": "ğŸ¦",
            "è¨¼åˆ¸ãƒ»å•†å“å…ˆç‰©": "ğŸ“ˆ",
            "ä¿é™ºæ¥­": "ğŸ›¡ï¸",
            "ãã®ä»–é‡‘è": "ğŸ’°",
            "ä¸å‹•ç”£æ¥­": "ğŸ¢",
            "ã‚µãƒ¼ãƒ“ã‚¹æ¥­": "ğŸ¯"
        };

        // ã‚»ã‚¯ã‚¿ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¾æ›¸ï¼ˆå®Œå…¨ç‰ˆï¼‰
        const SECTOR_KEYWORDS = {
            "å»ºè¨­": ["å»ºè¨­", "å¤§å’Œãƒã‚¦ã‚¹", "ç©æ°´ãƒã‚¦ã‚¹", "å¤§æˆå»ºè¨­", "é¹¿å³¶", "æ¸…æ°´å»ºè¨­", "å¤§æ—çµ„", "ç«¹ä¸­å·¥å‹™åº—", "å‰ç”°å»ºè¨­", "ä½å®…", "ãƒãƒ³ã‚·ãƒ§ãƒ³", "ãƒ“ãƒ«", "ã‚¤ãƒ³ãƒ•ãƒ©", "åœŸæœ¨", "æ–½å·¥", "ã‚¼ãƒã‚³ãƒ³", "ä¸å‹•ç”£é–‹ç™º", "ãƒªãƒ•ã‚©ãƒ¼ãƒ ", "ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³"],
            "æ©Ÿæ¢°": ["ä¸‰è±é‡å·¥", "å·å´é‡å·¥", "IHI", "ã‚¯ãƒœã‚¿", "å°æ¾è£½ä½œæ‰€", "ã‚³ãƒãƒ„", "ãƒ€ã‚¤ã‚­ãƒ³", "ãƒ•ã‚¡ãƒŠãƒƒã‚¯", "å·¥ä½œæ©Ÿæ¢°", "ç”£æ¥­æ©Ÿæ¢°", "å»ºè¨­æ©Ÿæ¢°", "é‡æ©Ÿ", "ãƒ­ãƒœãƒƒãƒˆ", "ç©ºèª¿", "ã‚¨ã‚¢ã‚³ãƒ³", "æ²¹åœ§", "ãƒãƒ³ãƒ—", "ã‚¿ãƒ¼ãƒ“ãƒ³"],
            "è¼¸é€ç”¨æ©Ÿå™¨": ["ãƒˆãƒ¨ã‚¿", "ãƒ›ãƒ³ãƒ€", "æ—¥ç”£", "ã‚¹ã‚ºã‚­", "ãƒãƒ„ãƒ€", "SUBARU", "ã‚¹ãƒãƒ«", "ãƒ€ã‚¤ãƒãƒ„", "ã„ã™ã‚", "ä¸‰è±è‡ªå‹•è»Š", "è‡ªå‹•è»Š", "EV", "é›»æ°—è‡ªå‹•è»Š", "HV", "ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰", "PHEV", "FCV", "ç‡ƒæ–™é›»æ± è»Š", "è‡ªå‹•é‹è»¢", "ã‚«ãƒ¼ãƒœãƒ³ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«", "éƒ¨å“", "ã‚¨ãƒ³ã‚¸ãƒ³", "ãƒˆãƒ©ãƒ³ã‚¹ãƒŸãƒƒã‚·ãƒ§ãƒ³", "ãƒãƒƒãƒ†ãƒªãƒ¼", "åŠå°ä½“ä¸è¶³"],
            "é™¸é‹æ¥­": ["JRæ±æ—¥æœ¬", "JRæ±æµ·", "JRè¥¿æ—¥æœ¬", "ãƒ¤ãƒãƒˆHD", "ãƒ¤ãƒãƒˆé‹è¼¸", "ä½å·æ€¥ä¾¿", "è¥¿æ¿ƒé‹è¼¸", "é‰„é“", "æ–°å¹¹ç·š", "ãƒªãƒ‹ã‚¢", "å®…é…", "ç‰©æµ", "é…é€", "é‹é€", "è²¨ç‰©", "æ—…å®¢", "è¼¸é€"],
            "ç‰©æµ": ["æ—¥æœ¬é€šé‹", "æ—¥é€š", "SGãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹", "å€‰åº«", "ç‰©æµã‚»ãƒ³ã‚¿ãƒ¼", "ãƒ­ã‚¸ã‚¹ãƒ†ã‚£ã‚¯ã‚¹", "ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³", "åœ¨åº«ç®¡ç†"],
            "å¸å£²æ¥­": ["ä¸‰è±å•†äº‹", "ä¼Šè—¤å¿ ", "ä¸¸ç´…", "ä½å‹å•†äº‹", "ä¸‰äº•ç‰©ç”£", "åŒæ—¥", "è±Šç”°é€šå•†", "å•†ç¤¾", "ç·åˆå•†ç¤¾", "è³‡æº", "è²¿æ˜“", "ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°", "ä»²ä»‹", "è¼¸å‡ºå…¥"],
            "å°å£²æ¥­": ["ã‚»ãƒ–ãƒ³&ã‚¢ã‚¤", "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°", "ãƒ¦ãƒ‹ã‚¯ãƒ­", "ã‚¤ã‚ªãƒ³", "ãƒ­ãƒ¼ã‚½ãƒ³", "ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒãƒ¼ãƒˆ", "å°å£²", "ç™¾è²¨åº—", "ã‚¹ãƒ¼ãƒ‘ãƒ¼", "ã‚³ãƒ³ãƒ“ãƒ‹", "ã‚¢ãƒ‘ãƒ¬ãƒ«", "EC", "ãƒãƒƒãƒˆé€šè²©", "åº—èˆ—", "æ¶ˆè²»"],
            "ç´ æ": ["JFE", "ç´ æ", "ææ–™", "åŸæ–™", "ãƒ¬ã‚¢ãƒ¡ã‚¿ãƒ«", "ãƒ¬ã‚¢ã‚¢ãƒ¼ã‚¹"],
            "åŒ–å­¦": ["ä¸‰è±ã‚±ãƒŸã‚«ãƒ«", "ä½å‹åŒ–å­¦", "æ—­åŒ–æˆ", "ä¿¡è¶ŠåŒ–å­¦", "è³‡ç”Ÿå ‚", "èŠ±ç‹", "å¯Œå£«ãƒ•ã‚¤ãƒ«ãƒ ", "JSR", "åŒ–å­¦", "åŒ–å­¦å“", "æ¨¹è„‚", "ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯", "ç¹Šç¶­", "å¡—æ–™", "æ¥ç€å‰¤", "åˆæˆ", "è§¦åª’", "åŠå°ä½“ææ–™"],
            "åŒ»è–¬å“": ["æ­¦ç”°è–¬å“", "ã‚¢ã‚¹ãƒ†ãƒ©ã‚¹", "ç¬¬ä¸€ä¸‰å…±", "ä¸­å¤–è£½è–¬", "ã‚¨ãƒ¼ã‚¶ã‚¤", "å¤§å¡šHD", "å¡©é‡ç¾©", "ç”°è¾ºä¸‰è±", "åŒ»è–¬å“", "è£½è–¬", "æ–°è–¬", "æ²»é¨“", "æ‰¿èª", "å‰µè–¬", "ãƒã‚¤ã‚ª", "æŠ—ãŒã‚“å‰¤", "ãƒ¯ã‚¯ãƒãƒ³", "ã‚¸ã‚§ãƒãƒªãƒƒã‚¯", "å¾Œç™ºè–¬"],
            "çŸ³æ²¹ãƒ»çŸ³ç‚­": ["ENEOS", "å‡ºå…‰èˆˆç”£", "ã‚³ã‚¹ãƒ¢ã‚¨ãƒãƒ«ã‚®ãƒ¼", "çŸ³æ²¹", "åŸæ²¹", "ã‚¬ã‚½ãƒªãƒ³", "è»½æ²¹", "ç¯æ²¹", "LNG", "LPG", "ç‡ƒæ–™", "ç²¾è£½"],
            "é‰±æ¥­": ["INPEX", "çŸ³æ²¹è³‡æºé–‹ç™º", "å›½éš›çŸ³æ²¹é–‹ç™ºå¸çŸ³", "K&Oã‚¨ãƒŠã‚¸ãƒ¼", "é‰±æ¥­", "æ¡æ˜", "é‰±å±±", "è³‡æºé–‹ç™º", "çŸ³æ²¹é–‹ç™º", "å¤©ç„¶ã‚¬ã‚¹"],
            "ã‚´ãƒ è£½å“": ["ãƒ–ãƒªãƒ‚ã‚¹ãƒˆãƒ³", "ä½å‹ã‚´ãƒ ", "æ¨ªæµœã‚´ãƒ ", "ã‚¿ã‚¤ãƒ¤", "ã‚´ãƒ ", "ãƒ©ãƒãƒ¼"],
            "ã‚¬ãƒ©ã‚¹ãƒ»åœŸçŸ³": ["AGC", "æ—¥æœ¬æ¿ç¡å­", "å¤ªå¹³æ´‹ã‚»ãƒ¡ãƒ³ãƒˆ", "TOTO", "ã‚¬ãƒ©ã‚¹", "ã‚»ãƒ¡ãƒ³ãƒˆ", "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ", "è¡›ç”Ÿé™¶å™¨", "å»ºæ"],
            "é‰„é‹¼": ["æ—¥æœ¬è£½é‰„", "JFE", "ç¥æˆ¸è£½é‹¼æ‰€", "é‰„é‹¼", "é‹¼æ", "é«˜ç‚‰", "è£½é‰„", "é‰„", "é‹¼æ¿", "é‹¼ç®¡", "ç‰¹æ®Šé‹¼"],
            "éé‰„é‡‘å±": ["ä½å‹é‡‘å±é‰±å±±", "ä¸‰è±ãƒãƒ†ãƒªã‚¢ãƒ«", "ä¸‰äº•é‡‘å±", "éé‰„", "éŠ…", "ã‚¢ãƒ«ãƒŸ", "äºœé‰›", "ãƒ‹ãƒƒã‚±ãƒ«", "é‡‘å±"],
            "é‡‘å±è£½å“": ["LIXIL", "ä¸‰å”ç«‹å±±", "YKK", "é‡‘å±è£½å“", "ã‚¢ãƒ«ãƒŸã‚µãƒƒã‚·", "å»ºæ", "ãƒ•ã‚¡ã‚¹ãƒŠãƒ¼"],
            "é›»æ°—æ©Ÿå™¨": ["ã‚½ãƒ‹ãƒ¼", "æ—¥ç«‹", "ä¸‰è±é›»æ©Ÿ", "ãƒ‘ãƒŠã‚½ãƒ‹ãƒƒã‚¯", "å¯Œå£«é€š", "NEC", "ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹", "æ±èŠ", "ã‚·ãƒ£ãƒ¼ãƒ—", "äº¬ã‚»ãƒ©", "é›»æ©Ÿ", "å®¶é›»", "åŠå°ä½“", "ã‚»ãƒ³ã‚µãƒ¼", "ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤", "æ¶²æ™¶", "æœ‰æ©ŸEL", "ãƒ¢ãƒ¼ã‚¿ãƒ¼", "åˆ¶å¾¡æ©Ÿå™¨", "FA", "ç™½ç‰©å®¶é›»", "AVæ©Ÿå™¨", "ã‚«ãƒ¡ãƒ©", "è¨ˆæ¸¬å™¨"],
            "æƒ…å ±ãƒ»é€šä¿¡": ["NTT", "KDDI", "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯G", "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯", "æ¥½å¤©", "æ¥½å¤©ãƒ¢ãƒã‚¤ãƒ«", "NTTãƒ‰ã‚³ãƒ¢", "ãƒ‰ã‚³ãƒ¢", "é€šä¿¡", "æºå¸¯", "ã‚¹ãƒãƒ›", "5G", "6G", "å…‰å›ç·š", "ãƒ–ãƒ­ãƒ¼ãƒ‰ãƒãƒ³ãƒ‰", "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼", "ã‚¯ãƒ©ã‚¦ãƒ‰", "IT", "DX", "AI", "äººå·¥çŸ¥èƒ½", "IoT", "ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿", "ã‚µã‚¤ãƒãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£"],
            "é£Ÿæ–™å“": ["å‘³ã®ç´ ", "ã‚­ãƒƒã‚³ãƒ¼ãƒãƒ³", "æ˜æ²»", "æ—¥æ¸…é£Ÿå“", "ã‚µãƒ³ãƒˆãƒªãƒ¼", "ã‚¢ã‚µãƒ’", "ã‚­ãƒªãƒ³", "æ—¥æœ¬ãƒãƒ ", "é£Ÿå“", "é£²æ–™", "èª¿å‘³æ–™", "è“å­", "ä¹³è£½å“", "ãƒ“ãƒ¼ãƒ«", "æ¸…æ¶¼é£²æ–™", "å†·å‡é£Ÿå“", "åŠ å·¥é£Ÿå“", "é£Ÿè‚‰"],
            "é›»æ°—ãƒ»ã‚¬ã‚¹æ¥­": ["æ±äº¬é›»åŠ›", "é–¢è¥¿é›»åŠ›", "ä¸­éƒ¨é›»åŠ›", "æ±äº¬ã‚¬ã‚¹", "å¤§é˜ªã‚¬ã‚¹", "é›»åŠ›", "ç™ºé›»", "é€é›»", "ã‚¬ã‚¹", "éƒ½å¸‚ã‚¬ã‚¹", "é›»æ°—", "åŸç™º", "å†ã‚¨ãƒ", "å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼", "å¤ªé™½å…‰", "é¢¨åŠ›"],
            "å€‰åº«ãƒ»é‹è¼¸": ["ä¸‰è±å€‰åº«", "ä¸‰äº•å€‰åº«", "å€‰åº«", "ä¿ç®¡", "è·å½¹"],
            "æ°´ç”£ãƒ»è¾²æ—": ["æ—¥æœ¬æ°´ç”£", "ãƒ‹ãƒƒã‚¹ã‚¤", "ãƒãƒ«ãƒãƒ‹ãƒãƒ­", "ãƒ›ã‚¯ãƒˆ", "æ°´ç”£", "è¾²æ—", "æ¼æ¥­", "é¤Šæ®–", "è¾²æ¥­", "æ—æ¥­", "ãã®ã“", "æ°´ç”£åŠ å·¥"],
            "ç¹Šç¶­è£½å“": ["æ±ãƒ¬", "å¸äºº", "ãƒ¦ãƒ‹ãƒã‚«", "ã‚¯ãƒ©ãƒœã‚¦", "ãƒ¯ã‚³ãƒ¼ãƒ«", "ç¹Šç¶­", "ç³¸", "å¸ƒ", "ãƒ†ã‚­ã‚¹ã‚¿ã‚¤ãƒ«", "ç‚­ç´ ç¹Šç¶­", "æ©Ÿèƒ½æ€§ç¹Šç¶­", "ä¸‹ç€", "ã‚¢ãƒ‘ãƒ¬ãƒ«"],
            "ãƒ‘ãƒ«ãƒ—ãƒ»ç´™": ["ç‹å­HD", "æ—¥æœ¬è£½ç´™", "ãƒ¬ãƒ³ã‚´ãƒ¼", "å¤§ç‹è£½ç´™", "ç´™", "ãƒ‘ãƒ«ãƒ—", "æ®µãƒœãƒ¼ãƒ«", "åŒ…è£…", "è£½ç´™", "å°åˆ·ç”¨ç´™", "ãƒ†ã‚£ãƒƒã‚·ãƒ¥"],
            "ã‚µãƒ¼ãƒ“ã‚¹æ¥­": ["ãƒªã‚¯ãƒ«ãƒ¼ãƒˆ", "é›»é€š", "åšå ±å ‚", "äººæ", "åºƒå‘Š", "åºƒå‘Šä»£ç†åº—", "ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°", "æ±‚äºº", "æ¡ç”¨", "æ´¾é£", "ã‚³ãƒ³ã‚µãƒ«"],
            "ç²¾å¯†æ©Ÿå™¨": ["ã‚­ãƒ¤ãƒãƒ³", "ãƒ‹ã‚³ãƒ³", "ã‚ªãƒªãƒ³ãƒ‘ã‚¹", "ãƒ†ãƒ«ãƒ¢", "ç²¾å¯†æ©Ÿå™¨", "å…‰å­¦", "ãƒ¬ãƒ³ã‚º", "ã‚«ãƒ¡ãƒ©", "é¡•å¾®é¡", "åŒ»ç™‚æ©Ÿå™¨", "å†…è¦–é¡", "è¨ˆæ¸¬æ©Ÿå™¨"],
            "ãã®ä»–è£½å“": ["ä»»å¤©å ‚", "ãƒãƒ³ãƒ€ã‚¤ãƒŠãƒ ã‚³", "ã‚³ãƒŠãƒŸ", "ã‚²ãƒ¼ãƒ ", "ç©å…·", "ãŠã‚‚ã¡ã‚ƒ", "å¨¯æ¥½", "ã‚¨ãƒ³ã‚¿ãƒ¡", "ã‚¹ã‚¤ãƒƒãƒ", "ãƒ—ãƒ¬ã‚¹ãƒ†"],
            "éŠ€è¡Œæ¥­": ["ä¸‰è±UFJ", "ä¸‰äº•ä½å‹", "ã¿ãšã»", "ä¸‰è±UFJéŠ€è¡Œ", "ä¸‰äº•ä½å‹éŠ€è¡Œ", "ã¿ãšã»éŠ€è¡Œ", "éŠ€è¡Œ", "é‡‘è", "èè³‡", "é é‡‘", "è²¸å‡º", "é‡‘åˆ©", "åˆ©ä¸Šã’", "åˆ©ä¸‹ã’", "ä¸è‰¯å‚µæ¨©"],
            "è¨¼åˆ¸ãƒ»å•†å“å…ˆç‰©": ["é‡æ‘HD", "é‡æ‘è­‰åˆ¸", "å¤§å’Œè¨¼åˆ¸", "SBI", "è¨¼åˆ¸", "æ ªå¼", "å‚µåˆ¸", "æŠ•è³‡", "è³‡ç”£é‹ç”¨", "ãƒ•ã‚¡ãƒ³ãƒ‰", "å…ˆç‰©", "ãƒ‡ãƒªãƒãƒ†ã‚£ãƒ–", "IPO", "M&A"],
            "ä¿é™ºæ¥­": ["æ±äº¬æµ·ä¸Š", "MS&AD", "SOMPO", "ç¬¬ä¸€ç”Ÿå‘½", "æ—¥æœ¬ç”Ÿå‘½", "ä¿é™º", "ç”Ÿå‘½ä¿é™º", "æå®³ä¿é™º", "è‡ªå‹•è»Šä¿é™º", "ç«ç½ä¿é™º", "åŒ»ç™‚ä¿é™º", "ãŒã‚“ä¿é™º"],
            "ãã®ä»–é‡‘è": ["ã‚ªãƒªãƒƒã‚¯ã‚¹", "ä¸‰äº•ä½å‹ãƒˆãƒ©ã‚¹ãƒˆ", "ãƒªãƒ¼ã‚¹", "ä¿¡è¨—", "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ", "ãƒ­ãƒ¼ãƒ³", "ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹"],
            "ä¸å‹•ç”£æ¥­": ["ä¸‰è±åœ°æ‰€", "ä¸‰äº•ä¸å‹•ç”£", "ä½å‹ä¸å‹•ç”£", "æ±æ€¥ä¸å‹•ç”£", "ä¸å‹•ç”£", "ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼", "ã‚ªãƒ•ã‚£ã‚¹ãƒ“ãƒ«", "å•†æ¥­æ–½è¨­", "è³ƒè²¸", "REIT", "å†é–‹ç™º"],
            "æµ·é‹æ¥­": ["æ—¥æœ¬éƒµèˆ¹", "å•†èˆ¹ä¸‰äº•", "å·å´æ±½èˆ¹", "æµ·é‹", "èˆ¹èˆ¶", "ã‚³ãƒ³ãƒ†ãƒŠ", "æµ·ä¸Šè¼¸é€", "ã‚¿ãƒ³ã‚«ãƒ¼", "ãƒãƒ«ã‚¯", "é‹è³ƒ"],
            "ç©ºé‹æ¥­": ["ANA", "å…¨æ—¥ç©º", "JAL", "æ—¥æœ¬èˆªç©º", "ã‚¹ã‚«ã‚¤ãƒãƒ¼ã‚¯", "èˆªç©º", "ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³", "èˆªç©ºæ©Ÿ", "ç©ºæ¸¯", "å›½éš›ç·š", "LCC", "æ ¼å®‰èˆªç©º"]
        };

        // ã‚»ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³é…ç½®ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èª¿æ•´æ¸ˆã¿ï¼‰
        const SECTOR_ROTATION_POS = {
            "ãã®ä»–è£½å“": { angle: 178, radius: 169 },
            "ãã®ä»–é‡‘è": { angle: -129, radius: 109 },
            "ã‚¬ãƒ©ã‚¹ãƒ»åœŸçŸ³": { angle: -115, radius: 268 },
            "ã‚´ãƒ è£½å“": { angle: -73, radius: 158 },
            "ã‚µãƒ¼ãƒ“ã‚¹æ¥­": { angle: -53, radius: 109 },
            "ãƒ‘ãƒ«ãƒ—ãƒ»ç´™": { angle: 35, radius: 132 },
            "ä¸å‹•ç”£æ¥­": { angle: -102, radius: 299 },
            "ä¿é™ºæ¥­": { angle: -125, radius: 185 },
            "å€‰åº«ãƒ»é‹è¼¸": { angle: -2, radius: 132 },
            "åŒ–å­¦": { angle: -6, radius: 267 },
            "åŒ»è–¬å“": { angle: 162, radius: 254 },
            "å¸å£²æ¥­": { angle: -27, radius: 269 },
            "å°å£²æ¥­": { angle: 97, radius: 111 },
            "å»ºè¨­": { angle: -152, radius: 293 },
            "æƒ…å ±ãƒ»é€šä¿¡": { angle: -169, radius: 268 },
            "æ©Ÿæ¢°": { angle: -74, radius: 264 },
            "æ°´ç”£ãƒ»è¾²æ—": { angle: 120, radius: 222 },
            "æµ·é‹æ¥­": { angle: -89, radius: 290 },
            "ç‰©æµ": { angle: -29, radius: 150 },
            "çŸ³æ²¹ãƒ»çŸ³ç‚­": { angle: 16, radius: 269 },
            "ç©ºé‹æ¥­": { angle: 153, radius: 170 },
            "ç²¾å¯†æ©Ÿå™¨": { angle: -148, radius: 168 },
            "ç´ æ": { angle: -8, radius: 196 },
            "ç¹Šç¶­è£½å“": { angle: -163, radius: 107 },
            "è¨¼åˆ¸ãƒ»å•†å“å…ˆç‰©": { angle: -95, radius: 121 },
            "è¼¸é€ç”¨æ©Ÿå™¨": { angle: -52, radius: 280 },
            "é‡‘å±è£½å“": { angle: -151, radius: 231 },
            "é‰„é‹¼": { angle: -62, radius: 205 },
            "é‰±æ¥­": { angle: 16, radius: 197 },
            "éŠ€è¡Œæ¥­": { angle: -96, radius: 210 },
            "é™¸é‹æ¥­": { angle: 97, radius: 193 },
            "é›»æ°—ãƒ»ã‚¬ã‚¹æ¥­": { angle: 60, radius: 185 },
            "é›»æ°—æ©Ÿå™¨": { angle: -134, radius: 278 },
            "éé‰„é‡‘å±": { angle: -41, radius: 204 },
            "é£Ÿæ–™å“": { angle: 104, radius: 266 }
        };

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentPeriod = '1m';
        let currentProgress = 1.0;
        let SECTORS = [];

        // ä¼æ¥­ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå…¨33ã‚»ã‚¯ã‚¿ãƒ¼ãƒ»å®Ÿéš›ã®ä¸Šå ´ä¼æ¥­ï¼‰
        const COMPANY_DATABASE = {
            "æ°´ç”£ãƒ»è¾²æ—": [
                { name: "æ—¥æœ¬æ°´ç”£", code: "1332", cap: 0.15, change: -3.2 },
                { name: "ãƒãƒ«ãƒãƒ‹ãƒãƒ­", code: "1333", cap: 0.14, change: -4.1 },
                { name: "ãƒ›ã‚¯ãƒˆ", code: "1379", cap: 0.08, change: -2.8 },
                { name: "é›ªå›½ã¾ã„ãŸã‘", code: "1375", cap: 0.05, change: -1.5 },
                { name: "æ¥µæ´‹", code: "1301", cap: 0.04, change: -5.2 },
                { name: "æ—¥æœ¬ãŸã°ã“ç”£æ¥­", code: "2914", cap: 7.2, change: -2.3 },
                { name: "ãƒ›ã‚¯ãƒªãƒ¨ã‚¦", code: "1384", cap: 0.02, change: -3.7 },
                { name: "ã‚¤ãƒ¼ãƒˆã‚¢ãƒ³ãƒ‰", code: "2882", cap: 0.06, change: -1.8 }
            ],
            "é‰±æ¥­": [
                { name: "INPEX", code: "1605", cap: 2.8, change: -8.5 },
                { name: "çŸ³æ²¹è³‡æºé–‹ç™º", code: "1662", cap: 0.35, change: -7.2 },
                { name: "å›½éš›çŸ³æ²¹é–‹ç™ºå¸çŸ³", code: "1605", cap: 2.5, change: -6.8 },
                { name: "K&Oã‚¨ãƒŠã‚¸ãƒ¼", code: "1663", cap: 0.12, change: -9.1 }
            ],
            "å»ºè¨­": [
                { name: "å¤§å’Œãƒã‚¦ã‚¹å·¥æ¥­", code: "1925", cap: 3.8, change: 2.5 },
                { name: "ç©æ°´ãƒã‚¦ã‚¹", code: "1928", cap: 2.5, change: 1.8 },
                { name: "å¤§æˆå»ºè¨­", code: "1801", cap: 1.2, change: 3.2 },
                { name: "é¹¿å³¶å»ºè¨­", code: "1812", cap: 1.1, change: 2.9 },
                { name: "æ¸…æ°´å»ºè¨­", code: "1803", cap: 0.9, change: 2.1 },
                { name: "å¤§æ—çµ„", code: "1802", cap: 1.0, change: 2.7 },
                { name: "ç«¹ä¸­å·¥å‹™åº—", code: "1810", cap: 0.6, change: 1.5 },
                { name: "å‰ç”°å»ºè¨­å·¥æ¥­", code: "1824", cap: 0.3, change: 3.1 }
            ],
            "é£Ÿæ–™å“": [
                { name: "å‘³ã®ç´ ", code: "2802", cap: 2.8, change: -1.2 },
                { name: "ã‚­ãƒƒã‚³ãƒ¼ãƒãƒ³", code: "2801", cap: 1.2, change: -0.8 },
                { name: "æ˜æ²»ãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹", code: "2269", cap: 1.5, change: -1.5 },
                { name: "æ—¥æ¸…é£Ÿå“", code: "2897", cap: 1.1, change: -0.5 },
                { name: "ã‚µãƒ³ãƒˆãƒªãƒ¼é£Ÿå“", code: "2587", cap: 1.8, change: -1.1 },
                { name: "ã‚¢ã‚µãƒ’ã‚°ãƒ«ãƒ¼ãƒ—", code: "2502", cap: 3.2, change: -1.8 },
                { name: "ã‚­ãƒªãƒ³", code: "2503", cap: 2.1, change: -1.3 },
                { name: "æ—¥æœ¬ãƒãƒ ", code: "2282", cap: 0.8, change: -0.9 }
            ],
            "ç¹Šç¶­è£½å“": [
                { name: "æ±ãƒ¬", code: "3402", cap: 0.9, change: -2.5 },
                { name: "å¸äºº", code: "3401", cap: 0.4, change: -3.1 },
                { name: "ãƒ¦ãƒ‹ãƒã‚«", code: "3103", cap: 0.05, change: -4.2 },
                { name: "ã‚¯ãƒ©ãƒœã‚¦", code: "3106", cap: 0.08, change: -2.8 },
                { name: "ãƒ¯ã‚³ãƒ¼ãƒ«HD", code: "3591", cap: 0.3, change: -1.9 }
            ],
            "ãƒ‘ãƒ«ãƒ—ãƒ»ç´™": [
                { name: "ç‹å­HD", code: "3861", cap: 0.8, change: -2.1 },
                { name: "æ—¥æœ¬è£½ç´™", code: "3863", cap: 0.3, change: -3.5 },
                { name: "ãƒ¬ãƒ³ã‚´ãƒ¼", code: "3941", cap: 0.5, change: -1.8 },
                { name: "å¤§ç‹è£½ç´™", code: "3880", cap: 0.2, change: -2.9 }
            ],
            "åŒ–å­¦": [
                { name: "ä¸‰è±ã‚±ãƒŸã‚«ãƒ«G", code: "4188", cap: 2.1, change: 1.8 },
                { name: "ä½å‹åŒ–å­¦", code: "4005", cap: 1.2, change: 1.5 },
                { name: "æ—­åŒ–æˆ", code: "3407", cap: 1.5, change: 2.1 },
                { name: "ä¿¡è¶ŠåŒ–å­¦å·¥æ¥­", code: "4063", cap: 8.5, change: 2.8 },
                { name: "è³‡ç”Ÿå ‚", code: "4911", cap: 1.8, change: 1.2 },
                { name: "èŠ±ç‹", code: "4452", cap: 2.5, change: 0.8 },
                { name: "å¯Œå£«ãƒ•ã‚¤ãƒ«ãƒ ", code: "4901", cap: 3.2, change: 1.9 },
                { name: "JSR", code: "4185", cap: 0.6, change: 2.3 }
            ],
            "åŒ»è–¬å“": [
                { name: "æ­¦ç”°è–¬å“å·¥æ¥­", code: "4502", cap: 7.2, change: -0.5 },
                { name: "ã‚¢ã‚¹ãƒ†ãƒ©ã‚¹è£½è–¬", code: "4503", cap: 2.8, change: -0.8 },
                { name: "ç¬¬ä¸€ä¸‰å…±", code: "4568", cap: 5.5, change: -0.3 },
                { name: "ä¸­å¤–è£½è–¬", code: "4519", cap: 4.2, change: -0.6 },
                { name: "ã‚¨ãƒ¼ã‚¶ã‚¤", code: "4523", cap: 2.1, change: -0.9 },
                { name: "å¤§å¡šHD", code: "4578", cap: 1.8, change: -0.4 },
                { name: "å¡©é‡ç¾©è£½è–¬", code: "4507", cap: 1.2, change: -0.7 },
                { name: "å°é‡è–¬å“å·¥æ¥­", code: "4528", cap: 1.5, change: -0.2 }
            ],
            "çŸ³æ²¹ãƒ»çŸ³ç‚­": [
                { name: "ENEOS", code: "5020", cap: 2.5, change: -5.2 },
                { name: "å‡ºå…‰èˆˆç”£", code: "5019", cap: 1.2, change: -6.1 },
                { name: "ã‚³ã‚¹ãƒ¢ã‚¨ãƒãƒ«ã‚®ãƒ¼", code: "5021", cap: 0.8, change: -5.8 },
                { name: "å¯Œå£«çŸ³æ²¹", code: "5017", cap: 0.1, change: -7.3 }
            ],
            "ã‚´ãƒ è£½å“": [
                { name: "ãƒ–ãƒªãƒ‚ã‚¹ãƒˆãƒ³", code: "5108", cap: 3.8, change: -1.8 },
                { name: "ä½å‹ã‚´ãƒ å·¥æ¥­", code: "5110", cap: 0.9, change: -2.5 },
                { name: "æ¨ªæµœã‚´ãƒ ", code: "5101", cap: 0.6, change: -2.1 },
                { name: "æ±æ´‹ã‚´ãƒ å·¥æ¥­", code: "5105", cap: 0.3, change: -3.2 }
            ],
            "ã‚¬ãƒ©ã‚¹ãƒ»åœŸçŸ³": [
                { name: "AGC", code: "5201", cap: 1.5, change: -1.5 },
                { name: "æ—¥æœ¬æ¿ç¡å­", code: "5202", cap: 0.3, change: -2.8 },
                { name: "å¤ªå¹³æ´‹ã‚»ãƒ¡ãƒ³ãƒˆ", code: "5233", cap: 0.5, change: -1.9 },
                { name: "ä½å‹å¤§é˜ªã‚»ãƒ¡ãƒ³ãƒˆ", code: "5232", cap: 0.2, change: -2.3 },
                { name: "TOTO", code: "5332", cap: 1.2, change: -1.2 }
            ],
            "é‰„é‹¼": [
                { name: "æ—¥æœ¬è£½é‰„", code: "5401", cap: 3.2, change: 1.2 },
                { name: "JFE", code: "5411", cap: 1.5, change: 0.8 },
                { name: "ç¥æˆ¸è£½é‹¼æ‰€", code: "5406", cap: 0.6, change: 1.5 },
                { name: "å¤§åŒç‰¹æ®Šé‹¼", code: "5471", cap: 0.4, change: 0.9 },
                { name: "æ—¥ç«‹é‡‘å±", code: "5486", cap: 0.3, change: 1.1 }
            ],
            "éé‰„é‡‘å±": [
                { name: "ä½å‹é‡‘å±é‰±å±±", code: "5713", cap: 1.8, change: 0.5 },
                { name: "ä¸‰è±ãƒãƒ†ãƒªã‚¢ãƒ«", code: "5711", cap: 0.8, change: 0.3 },
                { name: "ä¸‰äº•é‡‘å±", code: "5706", cap: 0.5, change: 0.7 },
                { name: "DOWAãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹", code: "5714", cap: 0.4, change: 0.4 },
                { name: "å¤æ²³é›»å·¥", code: "5801", cap: 0.6, change: 0.6 }
            ],
            "é‡‘å±è£½å“": [
                { name: "LIXIL", code: "5938", cap: 1.2, change: 1.8 },
                { name: "ä¸‰å”ç«‹å±±", code: "5932", cap: 0.2, change: 1.2 },
                { name: "YKK", code: "5990", cap: 0.3, change: 1.5 },
                { name: "ã‚¢ãƒ«ã‚¤ãƒ³ã‚³", code: "5933", cap: 0.1, change: 0.9 }
            ],
            "æ©Ÿæ¢°": [
                { name: "ä¸‰è±é‡å·¥æ¥­", code: "7011", cap: 5.2, change: 2.5 },
                { name: "å·å´é‡å·¥æ¥­", code: "7012", cap: 1.8, change: 2.1 },
                { name: "IHI", code: "7013", cap: 1.2, change: 1.8 },
                { name: "ã‚¯ãƒœã‚¿", code: "6326", cap: 3.5, change: 2.8 },
                { name: "å°æ¾è£½ä½œæ‰€", code: "6301", cap: 3.2, change: 2.3 },
                { name: "æ—¥ç«‹å»ºæ©Ÿ", code: "6305", cap: 0.9, change: 1.9 },
                { name: "ãƒ€ã‚¤ã‚­ãƒ³å·¥æ¥­", code: "6367", cap: 6.8, change: 3.1 },
                { name: "ãƒ•ã‚¡ãƒŠãƒƒã‚¯", code: "6954", cap: 4.5, change: 2.7 }
            ],
            "é›»æ°—æ©Ÿå™¨": [
                { name: "ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—", code: "6758", cap: 18.5, change: 3.8 },
                { name: "æ—¥ç«‹è£½ä½œæ‰€", code: "6501", cap: 12.8, change: 3.2 },
                { name: "ä¸‰è±é›»æ©Ÿ", code: "6503", cap: 5.5, change: 2.9 },
                { name: "ãƒ‘ãƒŠã‚½ãƒ‹ãƒƒã‚¯", code: "6752", cap: 4.2, change: 2.5 },
                { name: "æ±èŠ", code: "6502", cap: 1.8, change: 2.1 },
                { name: "å¯Œå£«é€š", code: "6702", cap: 3.5, change: 3.5 },
                { name: "NEC", code: "6701", cap: 2.8, change: 3.1 },
                { name: "ã‚­ãƒ¼ã‚¨ãƒ³ã‚¹", code: "6861", cap: 22.5, change: 4.2 }
            ],
            "è¼¸é€ç”¨æ©Ÿå™¨": [
                { name: "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š", code: "7203", cap: 42.5, change: 2.8 },
                { name: "ãƒ›ãƒ³ãƒ€", code: "7267", cap: 8.5, change: 2.2 },
                { name: "æ—¥ç”£è‡ªå‹•è»Š", code: "7201", cap: 1.8, change: 1.5 },
                { name: "ã‚¹ã‚ºã‚­", code: "7269", cap: 3.2, change: 2.5 },
                { name: "ãƒãƒ„ãƒ€", code: "7261", cap: 0.9, change: 1.8 },
                { name: "SUBARU", code: "7270", cap: 2.8, change: 2.3 },
                { name: "ã„ã™ã‚è‡ªå‹•è»Š", code: "7202", cap: 1.2, change: 2.1 },
                { name: "ä¸‰è±è‡ªå‹•è»Š", code: "7211", cap: 0.6, change: 1.2 }
            ],
            "ç²¾å¯†æ©Ÿå™¨": [
                { name: "ã‚­ãƒ¤ãƒãƒ³", code: "7751", cap: 4.2, change: 2.1 },
                { name: "ãƒ‹ã‚³ãƒ³", code: "7731", cap: 0.6, change: 1.8 },
                { name: "ã‚ªãƒªãƒ³ãƒ‘ã‚¹", code: "7733", cap: 2.5, change: 2.5 },
                { name: "ãƒ†ãƒ«ãƒ¢", code: "4543", cap: 3.8, change: 2.8 },
                { name: "ã‚·ãƒã‚ºãƒ³æ™‚è¨ˆ", code: "7762", cap: 0.3, change: 1.5 },
                { name: "ã‚»ã‚¤ã‚³ãƒ¼HD", code: "8050", cap: 0.4, change: 1.2 }
            ],
            "ãã®ä»–è£½å“": [
                { name: "ä»»å¤©å ‚", code: "7974", cap: 8.5, change: 3.5 },
                { name: "ãƒãƒ³ãƒ€ã‚¤ãƒŠãƒ ã‚³HD", code: "7832", cap: 2.1, change: 2.8 },
                { name: "ã‚³ãƒŠãƒŸã‚°ãƒ«ãƒ¼ãƒ—", code: "9766", cap: 1.2, change: 2.5 },
                { name: "ãƒ¤ãƒãƒ", code: "7951", cap: 1.5, change: 2.1 }
            ],
            "é›»æ°—ãƒ»ã‚¬ã‚¹æ¥­": [
                { name: "æ±äº¬é›»åŠ›HD", code: "9501", cap: 1.2, change: -0.8 },
                { name: "é–¢è¥¿é›»åŠ›", code: "9503", cap: 1.5, change: -0.5 },
                { name: "ä¸­éƒ¨é›»åŠ›", code: "9502", cap: 1.1, change: -0.6 },
                { name: "æ±äº¬ã‚¬ã‚¹", code: "9531", cap: 1.8, change: -0.3 },
                { name: "å¤§é˜ªã‚¬ã‚¹", code: "9532", cap: 0.9, change: -0.4 }
            ],
            "é™¸é‹æ¥­": [
                { name: "JRæ±æ—¥æœ¬", code: "9020", cap: 3.5, change: 1.5 },
                { name: "JRæ±æµ·", code: "9022", cap: 5.2, change: 1.8 },
                { name: "JRè¥¿æ—¥æœ¬", code: "9021", cap: 1.8, change: 1.2 },
                { name: "ãƒ¤ãƒãƒˆHD", code: "9064", cap: 1.5, change: 2.1 },
                { name: "æ—¥æœ¬éƒµèˆ¹", code: "9101", cap: 2.8, change: 1.8 }
            ],
            "æµ·é‹æ¥­": [
                { name: "æ—¥æœ¬éƒµèˆ¹", code: "9101", cap: 2.8, change: 1.5 },
                { name: "å•†èˆ¹ä¸‰äº•", code: "9104", cap: 1.5, change: 1.2 },
                { name: "å·å´æ±½èˆ¹", code: "9107", cap: 0.8, change: 0.9 }
            ],
            "ç©ºé‹æ¥­": [
                { name: "ANA", code: "9202", cap: 1.2, change: 2.5 },
                { name: "JAL", code: "9201", cap: 1.1, change: 2.2 },
                { name: "ã‚¹ã‚«ã‚¤ãƒãƒ¼ã‚¯", code: "9204", cap: 0.05, change: 1.8 }
            ],
            "å€‰åº«ãƒ»é‹è¼¸": [
                { name: "ä¸‰è±å€‰åº«", code: "9301", cap: 0.6, change: 1.2 },
                { name: "ä¸‰äº•å€‰åº«HD", code: "9302", cap: 0.4, change: 0.9 },
                { name: "ä½å‹å€‰åº«", code: "9303", cap: 0.3, change: 1.1 },
                { name: "æ—¥æœ¬é€šé‹", code: "9062", cap: 1.2, change: 1.5 }
            ],
            "æƒ…å ±ãƒ»é€šä¿¡": [
                { name: "NTT", code: "9432", cap: 15.8, change: 4.2 },
                { name: "KDDI", code: "9433", cap: 10.2, change: 3.8 },
                { name: "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯G", code: "9984", cap: 9.8, change: 3.5 },
                { name: "æ¥½å¤©ã‚°ãƒ«ãƒ¼ãƒ—", code: "4755", cap: 1.5, change: 5.2 },
                { name: "LINEãƒ¤ãƒ•ãƒ¼", code: "4689", cap: 2.3, change: 4.1 },
                { name: "DeNA", code: "2432", cap: 0.8, change: 3.8 },
                { name: "ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", code: "4751", cap: 0.9, change: 4.5 },
                { name: "GMOã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ", code: "9449", cap: 0.4, change: 3.2 }
            ],
            "å¸å£²æ¥­": [
                { name: "ä¸‰è±å•†äº‹", code: "8058", cap: 12.5, change: 2.1 },
                { name: "ä¼Šè—¤å¿ å•†äº‹", code: "8001", cap: 10.8, change: 2.5 },
                { name: "ä¸¸ç´…", code: "8002", cap: 4.2, change: 1.8 },
                { name: "ä½å‹å•†äº‹", code: "8053", cap: 5.5, change: 2.2 },
                { name: "ä¸‰äº•ç‰©ç”£", code: "8031", cap: 8.2, change: 2.3 }
            ],
            "å°å£²æ¥­": [
                { name: "ã‚»ãƒ–ãƒ³&ã‚¢ã‚¤HD", code: "3382", cap: 4.5, change: 1.2 },
                { name: "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°", code: "9983", cap: 12.8, change: 2.5 },
                { name: "ã‚¤ã‚ªãƒ³", code: "8267", cap: 3.2, change: 1.5 },
                { name: "ãƒ­ãƒ¼ã‚½ãƒ³", code: "2651", cap: 1.2, change: 1.8 },
                { name: "ãƒ•ã‚¡ãƒŸãƒªãƒ¼ãƒãƒ¼ãƒˆ", code: "8028", cap: 0.9, change: 1.3 }
            ],
            "éŠ€è¡Œæ¥­": [
                { name: "ä¸‰è±UFJ FG", code: "8306", cap: 18.5, change: 1.8 },
                { name: "ä¸‰äº•ä½å‹FG", code: "8316", cap: 12.2, change: 1.5 },
                { name: "ã¿ãšã»FG", code: "8411", cap: 8.5, change: 1.2 },
                { name: "ã‚ŠããªHD", code: "8308", cap: 2.1, change: 1.6 },
                { name: "ãµããŠã‹FG", code: "8354", cap: 0.8, change: 1.3 }
            ],
            "è¨¼åˆ¸ãƒ»å•†å“å…ˆç‰©": [
                { name: "é‡æ‘HD", code: "8604", cap: 2.5, change: 2.1 },
                { name: "å¤§å’Œè¨¼åˆ¸G", code: "8601", cap: 1.2, change: 1.8 },
                { name: "SBI HD", code: "8473", cap: 1.8, change: 2.5 },
                { name: "ãƒãƒãƒƒã‚¯ã‚¹G", code: "8698", cap: 0.3, change: 2.8 }
            ],
            "ä¿é™ºæ¥­": [
                { name: "æ±äº¬æµ·ä¸ŠHD", code: "8766", cap: 8.5, change: 1.5 },
                { name: "MS&AD", code: "8725", cap: 5.2, change: 1.2 },
                { name: "SOMPO HD", code: "8630", cap: 4.8, change: 1.3 },
                { name: "ç¬¬ä¸€ç”Ÿå‘½HD", code: "8750", cap: 3.2, change: 1.1 },
                { name: "T&D HD", code: "8795", cap: 1.8, change: 0.9 }
            ],
            "ãã®ä»–é‡‘è": [
                { name: "ã‚ªãƒªãƒƒã‚¯ã‚¹", code: "8591", cap: 4.2, change: 1.8 },
                { name: "ä¸‰äº•ä½å‹ãƒˆãƒ©ã‚¹ãƒˆ", code: "8309", cap: 2.5, change: 1.5 },
                { name: "ã‚¯ãƒ¬ãƒ‡ã‚£ã‚»ã‚¾ãƒ³", code: "8253", cap: 0.6, change: 2.1 },
                { name: "ã‚¢ã‚³ãƒ ", code: "8572", cap: 0.5, change: 1.2 }
            ],
            "ä¸å‹•ç”£æ¥­": [
                { name: "ä¸‰è±åœ°æ‰€", code: "8802", cap: 3.8, change: 1.2 },
                { name: "ä¸‰äº•ä¸å‹•ç”£", code: "8801", cap: 5.2, change: 1.5 },
                { name: "ä½å‹ä¸å‹•ç”£", code: "8830", cap: 2.8, change: 1.3 },
                { name: "æ±æ€¥ä¸å‹•ç”£HD", code: "3289", cap: 1.2, change: 1.1 },
                { name: "é‡æ‘ä¸å‹•ç”£HD", code: "3231", cap: 0.9, change: 0.9 }
            ],
            "ã‚µãƒ¼ãƒ“ã‚¹æ¥­": [
                { name: "ãƒªã‚¯ãƒ«ãƒ¼ãƒˆHD", code: "6098", cap: 12.5, change: 3.5 },
                { name: "é›»é€šG", code: "4324", cap: 1.8, change: 2.1 },
                { name: "åšå ±å ‚DYHD", code: "2433", cap: 0.9, change: 1.8 },
                { name: "ãƒ‘ãƒ¼ã‚½ãƒ«HD", code: "2181", cap: 0.8, change: 2.5 },
                { name: "ãƒ™ãƒãƒƒã‚»HD", code: "9783", cap: 0.6, change: 1.5 }
            ],
            "ç‰©æµ": [
                { name: "æ—¥æœ¬é€šé‹", code: "9062", cap: 1.2, change: 1.8 },
                { name: "SGãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹", code: "9143", cap: 1.5, change: 2.1 },
                { name: "æ—¥ç«‹ç‰©æµ", code: "9086", cap: 0.4, change: 1.5 },
                { name: "ã‚»ãƒ³ã‚³ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—HD", code: "9069", cap: 0.3, change: 1.2 }
            ],
            "ç´ æ": [
                { name: "JFEãƒ›ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ³ã‚°ã‚¹", code: "5411", cap: 1.5, change: 1.2 },
                { name: "ä½å‹é‡‘å±é‰±å±±", code: "5713", cap: 1.8, change: 1.5 },
                { name: "ä¸‰äº•é‡‘å±", code: "5706", cap: 0.5, change: 1.1 },
                { name: "ä½å‹åŒ–å­¦", code: "4005", cap: 1.2, change: 1.8 }
            ]
        };

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ï¼ˆ8ä»¶ã€å®Ÿéš›ã®ã‚µã‚¤ãƒˆãƒªãƒ³ã‚¯ä»˜ãï¼‰
        const NEWS = [
            { 
                icon: "ğŸŸ¢", 
                sector: "åŠå°ä½“é–¢é€£ç¶šä¼¸", 
                change: "+2.4%", 
                content: "AIå‘ã‘æŠ•è³‡ãŒåŠ é€Ÿã€å›½å†…å¤§æ‰‹ã«ã‚‚è³‡é‡‘ãŒæµå…¥", 
                source: "ã‹ã¶ãŸã‚“", 
                url: "https://kabutan.jp/", 
                sectors: ["åŒ–å­¦", "æ©Ÿæ¢°", "é›»æ°—æ©Ÿå™¨"] 
            },
            { 
                icon: "ğŸš—", 
                sector: "è‡ªå‹•è»Šã‚»ã‚¯ã‚¿ãƒ¼", 
                change: "-1.8%", 
                content: "EVè²©å£²éˆåŒ–æ‡¸å¿µã§ä¸»è¦ãƒ¡ãƒ¼ã‚«ãƒ¼ãŒè»Ÿèª¿", 
                source: "æ—¥çµŒ", 
                url: "https://www.nikkei.com/", 
                sectors: ["è¼¸é€ç”¨æ©Ÿå™¨"] 
            },
            { 
                icon: "ğŸ¢", 
                sector: "é‡‘èæ ªå …èª¿", 
                change: "+1.5%", 
                content: "é•·æœŸé‡‘åˆ©ä¸Šæ˜‡ã‚’èƒŒæ™¯ã«éŠ€è¡Œãƒ»è¨¼åˆ¸æ ªãŒä¸Šæ˜‡", 
                source: "Yahoo!ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹", 
                url: "https://finance.yahoo.co.jp/", 
                sectors: ["éŠ€è¡Œæ¥­", "è¨¼åˆ¸ãƒ»å•†å“å…ˆç‰©"] 
            },
            { 
                icon: "ğŸ¦", 
                sector: "æ—¥éŠ€æ”¿ç­–", 
                change: "", 
                content: "é‡‘èæ”¿ç­–ç¶­æŒã‚’æ±ºå®šã€å¸‚å ´ã¯æƒ³å®šå†…ã¨åå¿œ", 
                source: "ã‹ã¶ãŸã‚“", 
                url: "https://kabutan.jp/", 
                sectors: ["éŠ€è¡Œæ¥­", "ä¿é™ºæ¥­", "ãã®ä»–é‡‘è"] 
            },
            { 
                icon: "ğŸŸ¢", 
                sector: "é€šä¿¡æ ªä¸Šæ˜‡", 
                change: "+1.8%", 
                content: "5Gæ™®åŠåŠ é€Ÿã§é€šä¿¡å¤§æ‰‹ãŒè²·ã‚ã‚Œã‚‹å±•é–‹", 
                source: "æ—¥çµŒ", 
                url: "https://www.nikkei.com/", 
                sectors: ["æƒ…å ±ãƒ»é€šä¿¡"] 
            },
            { 
                icon: "ğŸ’Š", 
                sector: "åŒ»è–¬å“ã‚»ã‚¯ã‚¿ãƒ¼", 
                change: "-2.1%", 
                content: "æ–°è–¬æ‰¿èªé…ã‚Œã§ä¸»è¦è£½è–¬ä¼šç¤¾ãŒä¸‹è½", 
                source: "Yahoo!ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹", 
                url: "https://finance.yahoo.co.jp/", 
                sectors: ["åŒ»è–¬å“"] 
            },
            { 
                icon: "ğŸ—ï¸", 
                sector: "ä¸å‹•ç”£å¸‚æ³", 
                change: "-1.3%", 
                content: "é‡‘åˆ©ä¸Šæ˜‡è­¦æˆ’ã§ä¸å‹•ç”£æ ªã«å£²ã‚Šåœ§åŠ›", 
                source: "ã‹ã¶ãŸã‚“", 
                url: "https://kabutan.jp/", 
                sectors: ["ä¸å‹•ç”£æ¥­", "å»ºè¨­"] 
            },
            { 
                icon: "âš¡", 
                sector: "ã‚¨ãƒãƒ«ã‚®ãƒ¼é–¢é€£", 
                change: "+2.2%", 
                content: "åŸæ²¹ä¾¡æ ¼ä¸Šæ˜‡ã§çŸ³æ²¹ãƒ»ã‚¬ã‚¹é–¢é€£æ ªãŒé«˜ã„", 
                source: "æ—¥çµŒ", 
                url: "https://www.nikkei.com/", 
                sectors: ["é‰±æ¥­", "çŸ³æ²¹ãƒ»çŸ³ç‚­"] 
            }
        ];

        // ç°¡æ˜“çš„ãªã‚»ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
        function generateSimpleSectorData(volatility) {
            const sectorNames = Object.keys(SECTOR_ROTATION_POS);
            return sectorNames.map(name => {
                const companies = COMPANY_DATABASE[name] || [];
                return {
                    name: name,
                    value: (Math.random() - 0.5) * volatility,
                    stocks: companies.length > 0 ? companies : [
                        { name: `${name}æ ª1`, code: "0000", cap: 1.0, change: (Math.random() - 0.5) * volatility }
                    ]
                };
            });
        }

        SECTORS = generateSimpleSectorData(3);

        function getSectorColor(value) {
            if (value >= 0) return 'positive';
            return 'negative';
        }

        function createSectors() {
            const galaxy = document.getElementById('galaxy');
            galaxy.querySelectorAll('.sector').forEach(el => el.remove());
            
            const centerX = 375;
            const centerY = 375;
            
            // ã‚»ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«ä½ç½®æƒ…å ±ã‚’è¿½åŠ 
            const sectorsWithPos = SECTORS.map(sector => {
                const pos = SECTOR_ROTATION_POS[sector.name];
                if (!pos) return null;
                
                const marketCapSize = Math.sqrt(sector.stocks.reduce((sum, s) => sum + s.cap, 1)) * 16.5;
                const size = Math.max(55, Math.min(110, marketCapSize));
                
                return { ...sector, ...pos, size, marketCapSize };
            }).filter(s => s !== null);
            
            // é…ç½®ï¼ˆé‡ãªã‚Šæ¤œå‡ºãªã—ï¼‰
            const finalPositions = sectorsWithPos.map((sector) => {
                const angleRad = (sector.angle * Math.PI) / 180;
                const radius = sector.radius;
                
                const x = centerX + radius * Math.cos(angleRad);
                const y = centerY + radius * Math.sin(angleRad);
                
                return { ...sector, x, y, radius, angleRad };
            });
            
            // å®Ÿéš›ã«é…ç½®
            finalPositions.forEach((sector) => {
                const sectorEl = document.createElement('div');
                sectorEl.className = `sector ${getSectorColor(sector.value)}`;
                sectorEl.style.width = `${sector.size}px`;
                sectorEl.style.height = `${sector.size}px`;
                sectorEl.style.left = `${sector.x - sector.size / 2}px`;
                sectorEl.style.top = `${sector.y - sector.size / 2}px`;
                sectorEl.dataset.name = sector.name;
                
                const icon = SECTOR_ICONS[sector.name] || "ğŸ“Š";
                
                sectorEl.innerHTML = `
                    <div class="sector-label">
                        <div class="sector-icon">${icon}</div>
                        <span class="sector-name">${sector.name}</span>
                        <span class="sector-value">${sector.value > 0 ? '+' : ''}${sector.value.toFixed(1)}%</span>
                    </div>
                `;
                
                sectorEl.addEventListener('mouseenter', (e) => {
                    showSectorTooltip(sector, e.currentTarget);
                });
                
                sectorEl.addEventListener('mouseleave', () => {
                    hideSectorTooltip();
                    // ä¼æ¥­è©³ç´°ãƒ‘ãƒãƒ«ã‚‚é–‰ã˜ã‚‹
                    setTimeout(() => {
                        const panel = document.getElementById('company-detail');
                        if (panel && !panel.matches(':hover')) {
                            panel.classList.remove('visible');
                        }
                    }, 300);
                });
                
                galaxy.appendChild(sectorEl);
            });
        }

        // å¤§ããªç²’å­ï¼‹åˆ°ç€æ™‚å¤§ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        function createParticles() {
            const galaxy = document.getElementById('galaxy');
            
            setInterval(() => {
                const losers = SECTORS.filter(s => s.value < 0);
                const winners = SECTORS.filter(s => s.value > 0);
                
                if (losers.length === 0 || winners.length === 0) return;
                
                // ãƒšã‚¢æ•°ã‚’å‰Šæ¸›ï¼ˆ3â†’2ï¼‰
                for (let pair = 0; pair < 2; pair++) {
                    const loser = losers[Math.floor(Math.random() * losers.length)];
                    const winner = winners[Math.floor(Math.random() * winners.length)];
                    
                    const loserEl = document.querySelector(`[data-name="${loser.name}"]`);
                    const winnerEl = document.querySelector(`[data-name="${winner.name}"]`);
                    
                    if (!loserEl || !winnerEl) continue;
                    
                    const startX = loserEl.offsetLeft + loserEl.offsetWidth / 2;
                    const startY = loserEl.offsetTop + loserEl.offsetHeight / 2;
                    const endX = winnerEl.offsetLeft + winnerEl.offsetWidth / 2;
                    const endY = winnerEl.offsetTop + winnerEl.offsetHeight / 2;
                    
                    // å¤‰å‹•ç‡ã«å¿œã˜ãŸç²’å­æ•°ã®è¨ˆç®—ï¼ˆÂ±2%ä¸Šé™ã€0.25%åˆ»ã¿ï¼‰
                    const loserChange = Math.abs(loser.value); // ãƒã‚¤ãƒŠã‚¹ã®çµ¶å¯¾å€¤
                    const winnerChange = Math.abs(winner.value); // ãƒ—ãƒ©ã‚¹ã®çµ¶å¯¾å€¤
                    const avgChange = Math.min((loserChange + winnerChange) / 2, 2.0); // 2%ã§ä¸Šé™
                    
                    // 0.25%åˆ»ã¿ã§æ®µéšçš„ã«ç²’å­æ•°ã‚’å¢—ã‚„ã™ï¼ˆ1å€‹æ¸›ã‚‰ã™ï¼‰
                    // 0-0.24%: 1å€‹, 0.25%: 2å€‹, 0.5%: 3å€‹, 0.75%: 4å€‹, 1.0%: 5å€‹, 1.25%: 6å€‹, 1.5%: 7å€‹, 1.75%: 8å€‹, 2.0%: 9å€‹
                    const particleCount = Math.max(1, Math.min(9, Math.floor(avgChange / 0.25) + 1));
                    
                    for (let i = 0; i < particleCount; i++) {
                        setTimeout(() => {
                            const particle = document.createElement('div');
                            particle.className = 'particle';
                            
                            // ãƒ©ãƒ³ãƒ€ãƒ ãªãŠé‡‘ã‚¢ã‚¤ã‚³ãƒ³ã‚’é¸æŠï¼ˆğŸ’´ğŸ’°ğŸª™ï¼‰
                            const moneyIcons = ['ğŸ’´', 'ğŸ’°', 'ğŸª™'];
                            particle.textContent = moneyIcons[Math.floor(Math.random() * moneyIcons.length)];
                            
                            particle.style.left = `${startX - 8}px`;
                            particle.style.top = `${startY - 8}px`;
                            galaxy.appendChild(particle);
                            
                            const duration = 4200 + Math.random() * 1800;  // 20%é…ãï¼ˆ3500â†’4200ã€5000â†’6000ï¼‰
                            const startTime = Date.now();
                            
                            const curveX = (Math.random() - 0.5) * 50;
                            const curveY = (Math.random() - 0.5) * 50;
                            
                            function animate() {
                                const elapsed = Date.now() - startTime;
                                const progress = Math.min(elapsed / duration, 1);
                                
                                // ãƒªãƒ‹ã‚¢ï¼ˆä¸€å®šé€Ÿåº¦ï¼‰ã§ç§»å‹•
                                const easeProgress = progress;
                                
                                const t = easeProgress;
                                const currentX = Math.pow(1-t, 2) * startX + 
                                               2 * (1-t) * t * (startX + curveX) + 
                                               Math.pow(t, 2) * endX;
                                const currentY = Math.pow(1-t, 2) * startY + 
                                               2 * (1-t) * t * (startY + curveY) + 
                                               Math.pow(t, 2) * endY;
                                
                                particle.style.left = `${currentX - 8}px`;
                                particle.style.top = `${currentY - 8}px`;
                                
                                if (progress < 1) {
                                    requestAnimationFrame(animate);
                                } else {
                                    // åˆ°ç€ã—ãŸç²’å­ã¨åŒã˜ã‚¢ã‚¤ã‚³ãƒ³ã§1å€‹ã ã‘ãƒãƒƒãƒ—
                                    const arrivalIcon = particle.textContent;
                                    createBigArrivalEffect(endX, endY, arrivalIcon);
                                    particle.remove();
                                }
                            }
                            
                            animate();
                        }, i * 100);
                    }
                }
            }, 500); // 2.0å›/ç§’
        }

        function createBigArrivalEffect(x, y, icon) {
            const galaxy = document.getElementById('galaxy');
            
            // 1å€‹ã ã‘ãƒãƒƒãƒ—
            const spark = document.createElement('div');
            spark.className = 'particle';
            spark.textContent = icon; // åˆ°ç€ã—ãŸã‚¢ã‚¤ã‚³ãƒ³ã¨åŒã˜ã‚‚ã®ã‚’ä½¿ç”¨
            spark.style.left = `${x - 8}px`;
            spark.style.top = `${y - 8}px`;
            spark.style.opacity = 1;
            galaxy.appendChild(spark);
            
            // ä¸Šæ–¹å‘ã«è·³ã­ã‚‹
            const angleVariation = (Math.random() - 0.5) * 40;
            const angle = (-90 + angleVariation) * Math.PI / 180;
            const maxHeight = 20 + Math.random() * 10;
            const lateralMove = Math.cos(angle) * 8;
            
            const startTime = Date.now();
            const duration = 800;
            
            function animateSpark() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // ãƒã‚¦ãƒ³ã‚¹åŠ¹æœï¼ˆæ”¾ç‰©ç·šé‹å‹•ï¼‰
                const bounce = Math.sin(progress * Math.PI);
                const currentY = y - maxHeight * bounce;
                const currentX = x + lateralMove * progress;
                
                spark.style.left = `${currentX - 8}px`;
                spark.style.top = `${currentY - 8}px`;
                
                // ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå›è»¢ãªã—ãƒ»ã‚µã‚¤ã‚ºåŠåˆ†ï¼‰
                const scaleProgress = progress < 0.5 ? progress * 2 : (1 - progress) * 2;
                const scale = 0.9 + scaleProgress * 0.6;
                spark.style.transform = `scale(${scale})`;
                
                // ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ
                if (progress > 0.7) {
                    spark.style.opacity = (1 - progress) / 0.3;
                } else {
                    spark.style.opacity = 1;
                }
                
                if (progress < 1) {
                    requestAnimationFrame(animateSpark);
                } else {
                    spark.remove();
                }
            }
            
            animateSpark();
        }

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¨ã‚»ã‚¯ã‚¿ãƒ¼ã®ãƒãƒƒãƒãƒ³ã‚°é–¢æ•°
        function matchNewsToSectors(newsTitle, newsContent) {
            const matchedSectors = [];
            const text = (newsTitle + " " + newsContent).toLowerCase();
            
            for (const [sector, keywords] of Object.entries(SECTOR_KEYWORDS)) {
                for (const keyword of keywords) {
                    if (text.includes(keyword.toLowerCase())) {
                        if (!matchedSectors.includes(sector)) {
                            matchedSectors.push(sector);
                        }
                        break; // ã“ã®ã‚»ã‚¯ã‚¿ãƒ¼ã¯æ—¢ã«ãƒãƒƒãƒã—ãŸã®ã§æ¬¡ã¸
                    }
                }
            }
            
            return matchedSectors;
        }

        // ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—é–¢æ•°ï¼ˆç¾åœ¨ã¯ãƒ‡ãƒ¢ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”Ÿæˆï¼‰
        async function fetchNews() {
            const button = event.target;
            button.textContent = 'ğŸ”„ å–å¾—ä¸­...';
            button.disabled = true;
            
            // ãƒ‡ãƒ¢ç”¨ï¼šå®Ÿéš›ã®APIã«æ¥ç¶šã™ã‚‹å ´åˆã¯ã“ã“ã‚’ç½®ãæ›ãˆ
            const demoNews = [
                {
                    title: "ãƒˆãƒ¨ã‚¿ã€æ–°å‹EVã‚’2025å¹´ç™ºå£²ã¸",
                    content: "ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Šã¯æ¬¡ä¸–ä»£é›»æ°—è‡ªå‹•è»Šã®é–‹ç™ºã‚’åŠ é€Ÿã€‚ãƒãƒƒãƒ†ãƒªãƒ¼æŠ€è¡“ã®é©æ–°ã«ã‚ˆã‚Šèˆªç¶šè·é›¢ã‚’å¤§å¹…ã«å»¶é•·ã€‚",
                    change: "+2.5%",
                    time: "10åˆ†å‰"
                },
                {
                    title: "æ—¥éŠ€ã€é‡‘åˆ©æ”¿ç­–ã‚’æ®ãˆç½®ã",
                    content: "æ—¥æœ¬éŠ€è¡Œã¯é‡‘èæ”¿ç­–æ±ºå®šä¼šåˆã§æ”¿ç­–é‡‘åˆ©ã®æ®ãˆç½®ãã‚’æ±ºå®šã€‚ä¸‰è±UFJã€ä¸‰äº•ä½å‹ãªã©ãƒ¡ã‚¬ãƒãƒ³ã‚¯ã®æ ªä¾¡ã«å½±éŸ¿ã€‚",
                    change: "-0.8%",
                    time: "25åˆ†å‰"
                },
                {
                    title: "ã‚½ãƒ‹ãƒ¼ã€AIåŠå°ä½“ã«1å…†å††æŠ•è³‡",
                    content: "ã‚½ãƒ‹ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¯AIå‘ã‘åŠå°ä½“äº‹æ¥­ã«1å…†å††ã‚’æŠ•è³‡ã€‚æ¬¡ä¸–ä»£ã‚»ãƒ³ã‚µãƒ¼ã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ³ã‚°æŠ€è¡“ã‚’å¼·åŒ–ã€‚",
                    change: "+3.2%",
                    time: "1æ™‚é–“å‰"
                },
                {
                    title: "NTTã€6Gç ”ç©¶é–‹ç™ºã‚’æœ¬æ ¼åŒ–",
                    content: "NTTã¯æ¬¡ä¸–ä»£é€šä¿¡è¦æ ¼6Gã®ç ”ç©¶é–‹ç™ºã‚’åŠ é€Ÿã€‚2030å¹´ã®å®Ÿç”¨åŒ–ã‚’ç›®æŒ‡ã™ã€‚",
                    change: "+1.5%",
                    time: "2æ™‚é–“å‰"
                },
                {
                    title: "æ­¦ç”°è–¬å“ã€æ–°å‹æŠ—ãŒã‚“å‰¤ã®æ‰¿èªå–å¾—",
                    content: "æ­¦ç”°è–¬å“å·¥æ¥­ã¯æ–°ã—ã„æŠ—ãŒã‚“å‰¤ã®å›½å†…æ‰¿èªã‚’å–å¾—ã€‚ãŒã‚“æ²»ç™‚ã®æ–°ãŸãªé¸æŠè‚¢ã¨ã—ã¦æœŸå¾…ã€‚",
                    change: "+2.1%",
                    time: "3æ™‚é–“å‰"
                },
                {
                    title: "JRæ±æµ·ã€ãƒªãƒ‹ã‚¢é–‹æ¥­å»¶æœŸã®å¯èƒ½æ€§",
                    content: "JRæ±æµ·ã¯ãƒªãƒ‹ã‚¢ä¸­å¤®æ–°å¹¹ç·šã®é–‹æ¥­æ™‚æœŸã«ã¤ã„ã¦ã€å·¥äº‹ã®é…ã‚Œã‹ã‚‰å»¶æœŸã®å¯èƒ½æ€§ã‚’ç¤ºå”†ã€‚",
                    change: "-1.3%",
                    time: "4æ™‚é–“å‰"
                }
            ];
            
            // å„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«ã‚»ã‚¯ã‚¿ãƒ¼ã‚’ç´ä»˜ã‘
            const newsWithSectors = demoNews.map(news => {
                const sectors = matchNewsToSectors(news.title, news.content);
                return { ...news, sectors };
            });
            
            // ã‚°ãƒ­ãƒ¼ãƒãƒ«NEWSå¤‰æ•°ã‚’æ›´æ–°
            NEWS = newsWithSectors;
            
            // ãƒ‹ãƒ¥ãƒ¼ã‚¹è¡¨ç¤ºã‚’æ›´æ–°
            createNews();
            
            // ãƒœã‚¿ãƒ³ã‚’å…ƒã«æˆ»ã™
            setTimeout(() => {
                button.textContent = 'âœ… å–å¾—å®Œäº†';
                setTimeout(() => {
                    button.textContent = 'ğŸ”„ ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—';
                    button.disabled = false;
                }, 1000);
            }, 500);
        }

        function createNews() {
            const container = document.getElementById('news-container');
            container.innerHTML = '';
            
            NEWS.forEach(news => {
                const newsEl = document.createElement('div');
                newsEl.className = `news-item ${news.change.startsWith('-') ? 'negative' : ''}`;
                
                // ã‚»ã‚¯ã‚¿ãƒ¼æƒ…å ±ã‚’è¡¨ç¤ºï¼ˆè¤‡æ•°ã‚»ã‚¯ã‚¿ãƒ¼å¯¾å¿œï¼‰
                const sectorsText = news.sectors && news.sectors.length > 0 
                    ? news.sectors.slice(0, 3).join(', ') + (news.sectors.length > 3 ? ' ä»–' : '')
                    : 'å…¨èˆ¬';
                
                const icon = news.sectors && news.sectors.length > 0 
                    ? SECTOR_ICONS[news.sectors[0]] || 'ğŸ“Š'
                    : 'ğŸ“Š';
                
                newsEl.innerHTML = `
                    <div class="news-title">${news.title}</div>
                    <div class="news-sector">
                        <span class="news-icon">${icon}</span>
                        ${sectorsText} ${news.change}
                    </div>
                    <div class="news-content">${news.content}</div>
                    <div class="news-time">${news.time}</div>
                `;
                
                newsEl.addEventListener('mouseenter', function() {
                    if (news.sectors && news.sectors.length > 0) {
                        highlightSectors(news.sectors);
                    }
                });
                
                newsEl.addEventListener('mouseleave', function() {
                    clearHighlights();
                });
                
                container.appendChild(newsEl);
            });
        }

        function highlightSectors(sectorNames) {
            const galaxy = document.getElementById('galaxy');
            
            sectorNames.forEach(name => {
                const sectorEl = document.querySelector(`[data-name="${name}"]`);
                if (sectorEl) {
                    sectorEl.classList.add('highlighted');
                    
                    const ring = document.createElement('div');
                    ring.className = 'rotating-ring';
                    
                    const sectorSize = parseFloat(sectorEl.style.width);
                    const ringSize = sectorSize + 30;
                    
                    ring.style.width = `${ringSize}px`;
                    ring.style.height = `${ringSize}px`;
                    ring.style.position = 'absolute';
                    ring.style.left = `${parseFloat(sectorEl.style.left) + sectorSize / 2}px`;
                    ring.style.top = `${parseFloat(sectorEl.style.top) + sectorSize / 2}px`;
                    
                    ring.dataset.sectorName = name;
                    galaxy.appendChild(ring);
                }
            });
        }

        function clearHighlights() {
            document.querySelectorAll('.sector.highlighted').forEach(el => {
                el.classList.remove('highlighted');
            });
            
            document.querySelectorAll('.rotating-ring').forEach(ring => {
                ring.remove();
            });
        }

        let currentTooltip = null;
        let tooltipTimeout = null;

        function showSectorTooltip(sector, element) {
            if (tooltipTimeout) {
                clearTimeout(tooltipTimeout);
                tooltipTimeout = null;
            }
            
            if (currentTooltip) {
                currentTooltip.remove();
            }
            
            const tooltip = document.createElement('div');
            tooltip.className = 'sector-tooltip';
            
            // ãƒã‚¤ãƒŠã‚¹ã‚»ã‚¯ã‚¿ãƒ¼ã¯èµ¤è‰²ã«
            if (sector.value < 0) {
                tooltip.classList.add('negative-sector');
            }
            
            // æœ€å¤§8ç¤¾è¡¨ç¤ºã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§å…¨ã¦è¦‹ã‚‰ã‚Œã‚‹
            const displayCount = Math.min(8, sector.stocks.length);
            let stocksHTML = sector.stocks.slice(0, displayCount).map(stock => {
                const changeClass = stock.change > 0 ? 'positive' : 'negative';
                const changeSign = stock.change > 0 ? '+' : '';
                return `<div class="tooltip-stock" data-stock='${JSON.stringify({name: stock.name, code: stock.code, cap: stock.cap, change: stock.change})}'>
                    <div class="stock-name-code">
                        <div class="stock-name">${stock.name}</div>
                        <div class="stock-code-cap">${stock.code}.T | æ™‚ç·: ${stock.cap.toFixed(2)}å…†å††</div>
                    </div>
                    <span class="stock-change ${changeClass}">${changeSign}${stock.change.toFixed(1)}%</span>
                </div>`;
            }).join('');
            
            if (sector.stocks.length > 8) {
                stocksHTML += `<div style="text-align: center; color: #666; font-size: 0.7rem; margin-top: 0.5rem;">â†“ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§å…¨${sector.stocks.length}ç¤¾è¡¨ç¤º â†“</div>`;
                
                sector.stocks.slice(8).forEach(stock => {
                    const changeClass = stock.change > 0 ? 'positive' : 'negative';
                    const changeSign = stock.change > 0 ? '+' : '';
                    stocksHTML += `<div class="tooltip-stock" data-stock='${JSON.stringify({name: stock.name, code: stock.code, cap: stock.cap, change: stock.change})}'>
                        <div class="stock-name-code">
                            <div class="stock-name">${stock.name}</div>
                            <div class="stock-code-cap">${stock.code}.T | æ™‚ç·: ${stock.cap.toFixed(2)}å…†å††</div>
                        </div>
                        <span class="stock-change ${changeClass}">${changeSign}${stock.change.toFixed(1)}%</span>
                    </div>`;
                });
            }
            
            tooltip.innerHTML = `
                <div class="tooltip-title">${sector.name} (${sector.value > 0 ? '+' : ''}${sector.value.toFixed(1)}%)</div>
                <div class="tooltip-subtitle">ä¸»è¦éŠ˜æŸ„ï¼ˆæ™‚ä¾¡ç·é¡é †ï¼‰ - ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°</div>
                ${stocksHTML}
            `;
            
            document.body.appendChild(tooltip);
            
            // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            tooltip.querySelectorAll('.tooltip-stock').forEach(stockEl => {
                stockEl.addEventListener('click', function(e) {
                    const stockData = JSON.parse(this.dataset.stock);
                    showCompanyDetailNextTo(stockData.name, stockData.code, stockData.cap, stockData.change, this);
                });
            });
            
            const rect = element.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            let left = rect.left - tooltipRect.width - 15;
            let top = rect.top + (rect.height / 2) - (tooltipRect.height / 2);
            
            if (left < 10) {
                left = rect.right + 15;
            }
            
            if (left + tooltipRect.width > window.innerWidth - 10) {
                left = window.innerWidth - tooltipRect.width - 10;
            }
            
            if (top < 10) {
                top = 10;
            }
            
            if (top + tooltipRect.height > window.innerHeight - 10) {
                top = window.innerHeight - tooltipRect.height - 10;
            }
            
            tooltip.style.left = `${left}px`;
            tooltip.style.top = `${top}px`;
            tooltip.style.transform = 'none';
            
            tooltip.addEventListener('mouseenter', () => {
                if (tooltipTimeout) {
                    clearTimeout(tooltipTimeout);
                    tooltipTimeout = null;
                }
            });
            
            tooltip.addEventListener('mouseleave', () => {
                hideSectorTooltip();
            });
            
            setTimeout(() => {
                tooltip.classList.add('visible');
            }, 10);
            
            currentTooltip = tooltip;
        }

        function hideSectorTooltip() {
            tooltipTimeout = setTimeout(() => {
                if (currentTooltip) {
                    currentTooltip.classList.remove('visible');
                    setTimeout(() => {
                        if (currentTooltip) {
                            currentTooltip.remove();
                            currentTooltip = null;
                        }
                    }, 300);
                }
            }, 100);
        }

        function showCompanyDetail(name, code, cap, change) {
            const panel = document.getElementById('company-detail');
            document.getElementById('detail-company-name').textContent = name;
            document.getElementById('detail-market-cap').textContent = `${cap.toFixed(2)}å…†å††`;
            
            // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ ªä¾¡ãƒ‡ãƒ¼ã‚¿
            const basePrice = Math.floor(Math.random() * 5000) + 500;
            const currentPrice = basePrice * (1 + change / 100);
            document.getElementById('detail-stock-price').textContent = `Â¥${Math.floor(currentPrice).toLocaleString()}`;
            
            const per = (10 + Math.random() * 20).toFixed(1);
            const pbr = (0.5 + Math.random() * 2.5).toFixed(2);
            const roe = (5 + Math.random() * 15).toFixed(1);
            
            document.getElementById('detail-per').textContent = `${per}å€`;
            document.getElementById('detail-pbr').textContent = `${pbr}å€`;
            document.getElementById('detail-roe').textContent = `${roe}%`;
            
            panel.classList.add('visible');
        }

        function showCompanyDetailNextTo(name, code, cap, change, element) {
            const panel = document.getElementById('company-detail');
            document.getElementById('detail-company-name').textContent = name;
            document.getElementById('detail-market-cap').textContent = `${cap.toFixed(2)}å…†å††`;
            
            const basePrice = Math.floor(Math.random() * 5000) + 500;
            const currentPrice = basePrice * (1 + change / 100);
            document.getElementById('detail-stock-price').textContent = `Â¥${Math.floor(currentPrice).toLocaleString()}`;
            
            const per = (10 + Math.random() * 20).toFixed(1);
            const pbr = (0.5 + Math.random() * 2.5).toFixed(2);
            const roe = (5 + Math.random() * 15).toFixed(1);
            
            document.getElementById('detail-per').textContent = `${per}å€`;
            document.getElementById('detail-pbr').textContent = `${pbr}å€`;
            document.getElementById('detail-roe').textContent = `${roe}%`;
            
            // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®ä½ç½®ã‚’å–å¾—
            const tooltip = currentTooltip;
            const rect = element.getBoundingClientRect();
            
            // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã¨é‡ãªã‚‰ãªã„ã‚ˆã†ã«é…ç½®
            if (tooltip) {
                const tooltipRect = tooltip.getBoundingClientRect();
                // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã®å³ç«¯ã‹ã‚‰ã•ã‚‰ã«30pxé›¢ã™
                panel.style.left = `${tooltipRect.right + 30}px`;
                panel.style.top = `${rect.top}px`;
            } else {
                // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãŒãªã„å ´åˆã¯è¦ç´ ã®å³å´
                panel.style.left = `${rect.right + 30}px`;
                panel.style.top = `${rect.top}px`;
            }
            
            // ç”»é¢å¤–ãƒã‚§ãƒƒã‚¯ã¨èª¿æ•´
            setTimeout(() => {
                const panelRect = panel.getBoundingClientRect();
                
                // å³ç«¯ãƒã‚§ãƒƒã‚¯ï¼ˆç”»é¢å¤–ãªã‚‰å·¦å´ã«é…ç½®ï¼‰
                if (panelRect.right > window.innerWidth - 10) {
                    if (tooltip) {
                        const tooltipRect = tooltip.getBoundingClientRect();
                        panel.style.left = `${tooltipRect.left - panelRect.width - 30}px`;
                    } else {
                        panel.style.left = `${rect.left - panelRect.width - 30}px`;
                    }
                }
                
                // ä¸‹ç«¯ãƒã‚§ãƒƒã‚¯
                if (panelRect.bottom > window.innerHeight - 10) {
                    panel.style.top = `${window.innerHeight - panelRect.height - 10}px`;
                }
                
                // ä¸Šç«¯ãƒã‚§ãƒƒã‚¯
                if (panelRect.top < 10) {
                    panel.style.top = '10px';
                }
            }, 10);
            
            panel.classList.add('visible');
            
            // ãƒ‘ãƒãƒ«ãƒ›ãƒãƒ¼æ™‚ã®å‡¦ç†
            let panelTimeout;
            panel.onmouseenter = () => {
                if (panelTimeout) clearTimeout(panelTimeout);
            };
            
            panel.onmouseleave = () => {
                panelTimeout = setTimeout(() => {
                    panel.classList.remove('visible');
                }, 200);
            };
        }

        function closeCompanyDetail() {
            document.getElementById('company-detail').classList.remove('visible');
        }

        function updateNikkeiAverage() {
            const avgChange = SECTORS.reduce((sum, s) => sum + s.value, 0) / SECTORS.length;
            const nikkeiEl = document.getElementById('nikkei-change');
            const centerCircle = document.getElementById('center-circle');
            const priceEl = document.getElementById('nikkei-price');
            
            const basePrice = 39081;
            const currentPrice = basePrice * (1 + avgChange / 100);
            const formattedPrice = `Â¥${Math.floor(currentPrice).toLocaleString()}`;
            
            priceEl.textContent = formattedPrice;
            nikkeiEl.textContent = `${avgChange > 0 ? '+' : ''}${avgChange.toFixed(1)}%`;
            
            document.getElementById('nikkei-indicator-price').textContent = formattedPrice;
            document.getElementById('nikkei-indicator-change').textContent = `${avgChange > 0 ? '+' : ''}${avgChange.toFixed(1)}%`;
            document.getElementById('nikkei-indicator-change').className = `indicator-change ${avgChange >= 0 ? 'positive' : 'negative'}`;
            
            const topixBase = 2723;
            const topixCurrent = topixBase * (1 + avgChange / 100);
            document.getElementById('topix-price').textContent = Math.floor(topixCurrent).toLocaleString();
            document.getElementById('topix-change').textContent = `${avgChange > 0 ? '+' : ''}${avgChange.toFixed(1)}%`;
            document.getElementById('topix-change').className = `indicator-change ${avgChange >= 0 ? 'positive' : 'negative'}`;
            
            const growthBase = 685;
            const growthChange = avgChange * 1.5;
            const growthCurrent = growthBase * (1 + growthChange / 100);
            document.getElementById('growth-price').textContent = Math.floor(growthCurrent).toLocaleString();
            document.getElementById('growth-change').textContent = `${growthChange > 0 ? '+' : ''}${growthChange.toFixed(1)}%`;
            document.getElementById('growth-change').className = `indicator-change ${growthChange >= 0 ? 'positive' : 'negative'}`;
            
            const usdJpyBase = 157.82;
            const usdJpyChange = -avgChange * 0.15;
            const usdJpyCurrent = usdJpyBase * (1 + usdJpyChange / 100);
            document.getElementById('usdjpy-price').textContent = `Â¥${usdJpyCurrent.toFixed(2)}`;
            document.getElementById('usdjpy-change').textContent = `${usdJpyChange > 0 ? '+' : ''}${usdJpyChange.toFixed(2)}%`;
            document.getElementById('usdjpy-change').className = `indicator-change ${usdJpyChange >= 0 ? 'positive' : 'negative'}`;
            
            if (avgChange >= 0) {
                nikkeiEl.className = 'center-value';
                centerCircle.classList.remove('negative-market');
            } else {
                nikkeiEl.className = 'center-value negative';
                centerCircle.classList.add('negative-market');
            }
        }

        function initTimeline() {
            const periodBtns = document.querySelectorAll('.period-btn');
            const timelineCurrent = document.getElementById('timeline-current');
            const timelineStart = document.getElementById('timeline-start');
            const timelineEnd = document.getElementById('timeline-end');
            
            let currentPeriod = '1m';
            let currentMonth = new Date();
            
            // æœŸé–“ãƒœã‚¿ãƒ³
            periodBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    periodBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentPeriod = btn.dataset.period;
                    updateTimelineDisplay();
                });
            });
            
            function updateTimelineDisplay() {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth() + 1;
                const day = currentMonth.getDate();
                
                // æœŸé–“ã«ã‚ˆã£ã¦è¡¨ç¤ºã‚’å¤‰æ›´
                if (currentPeriod === '1d') {
                    timelineCurrent.textContent = `${year}å¹´${month}æœˆ${day}æ—¥`;
                } else if (currentPeriod === '1w') {
                    timelineCurrent.textContent = `${year}å¹´${month}æœˆ ç¬¬${Math.ceil(day/7)}é€±`;
                } else if (currentPeriod === '1m') {
                    timelineCurrent.textContent = `${year}å¹´${month}æœˆ`;
                } else if (currentPeriod === '3m') {
                    timelineCurrent.textContent = `${year}å¹´ Q${Math.ceil(month/3)}`;
                } else if (currentPeriod === '6m') {
                    timelineCurrent.textContent = `${year}å¹´ ${month <= 6 ? 'ä¸ŠæœŸ' : 'ä¸‹æœŸ'}`;
                } else if (currentPeriod === '1y') {
                    timelineCurrent.textContent = `${year}å¹´`;
                } else if (currentPeriod === '3y') {
                    timelineCurrent.textContent = `${year-1}ã€œ${year+1}å¹´`;
                } else if (currentPeriod === '5y') {
                    timelineCurrent.textContent = `${year-2}ã€œ${year+2}å¹´`;
                } else if (currentPeriod === '10y') {
                    timelineCurrent.textContent = `${year-5}ã€œ${year+4}å¹´`;
                } else if (currentPeriod === 'max') {
                    timelineCurrent.textContent = 'å…¨æœŸé–“';
                }
                
                // é–‹å§‹ãƒ»çµ‚äº†æ—¥ã®è¨ˆç®—
                let startDate = new Date(currentMonth);
                let endDate = new Date(currentMonth);
                
                if (currentPeriod === '1d') {
                    endDate = new Date(startDate);
                } else if (currentPeriod === '1w') {
                    endDate.setDate(startDate.getDate() + 7);
                } else if (currentPeriod === '1m') {
                    startDate.setDate(1);
                    endDate = new Date(startDate);
                    endDate.setMonth(endDate.getMonth() + 1);
                    endDate.setDate(0);
                } else if (currentPeriod === '3m') {
                    startDate.setMonth(startDate.getMonth() - 1);
                    endDate.setMonth(startDate.getMonth() + 3);
                } else if (currentPeriod === '6m') {
                    startDate.setMonth(startDate.getMonth() - 3);
                    endDate.setMonth(startDate.getMonth() + 6);
                } else if (currentPeriod === '1y') {
                    startDate.setMonth(0, 1);
                    endDate.setMonth(11, 31);
                } else if (currentPeriod === '3y') {
                    startDate.setFullYear(startDate.getFullYear() - 1, 0, 1);
                    endDate.setFullYear(startDate.getFullYear() + 3, 11, 31);
                } else if (currentPeriod === '5y') {
                    startDate.setFullYear(startDate.getFullYear() - 2, 0, 1);
                    endDate.setFullYear(startDate.getFullYear() + 5, 11, 31);
                } else if (currentPeriod === '10y') {
                    startDate.setFullYear(startDate.getFullYear() - 5, 0, 1);
                    endDate.setFullYear(startDate.getFullYear() + 10, 11, 31);
                } else if (currentPeriod === 'max') {
                    startDate = new Date(2000, 0, 1);
                    endDate = new Date();
                }
                
                timelineStart.textContent = `${startDate.getFullYear()}/${startDate.getMonth() + 1}/${startDate.getDate()}`;
                timelineEnd.textContent = `${endDate.getFullYear()}/${endDate.getMonth() + 1}/${endDate.getDate()}`;
            }
            
            updateTimelineDisplay();
        }
        
        // åˆæœŸåŒ–
        createSectors();
        createParticles();
        createNews();
        initTimeline();
        updateNikkeiAverage();
        
        // ä¸­å¿ƒå††ãƒ›ãƒãƒ¼
        document.getElementById('center-circle').addEventListener('mouseenter', (e) => {
            const nikkeiContributors = {
                name: "æ—¥çµŒå¹³å‡å¯„ä¸åº¦",
                value: 0,
                stocks: [
                    { name: "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒ†ã‚¤ãƒªãƒ³ã‚°", code: "9983", cap: 13.2, change: 2.1 },
                    { name: "æ±äº¬ã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ³", code: "8035", cap: 11.5, change: 3.5 },
                    { name: "ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯ã‚°ãƒ«ãƒ¼ãƒ—", code: "9984", cap: 9.8, change: 1.8 },
                    { name: "KDDI", code: "9433", cap: 10.2, change: 1.2 },
                    { name: "ãƒ€ã‚¤ã‚­ãƒ³å·¥æ¥­", code: "6367", cap: 7.8, change: 2.8 },
                    { name: "ä¿¡è¶ŠåŒ–å­¦å·¥æ¥­", code: "4063", cap: 9.2, change: 1.5 },
                    { name: "ãƒªã‚¯ãƒ«ãƒ¼ãƒˆHD", code: "6098", cap: 8.5, change: 0.9 },
                    { name: "ãƒ†ãƒ«ãƒ¢", code: "4543", cap: 6.2, change: 1.3 }
                ]
            };
            showSectorTooltip(nikkeiContributors, e.currentTarget);
        });
        
        document.getElementById('center-circle').addEventListener('mouseleave', () => {
            hideSectorTooltip();
        });
    </script>
</body>
</html>
